var radian=angular.module("radian",[]);radian.factory("processAttrs",["radianEval",function(e){"use strict";return function(t,n){t.$$radianVars={},Object.keys(n).forEach(function(r){if(r=="id"||r=="class"||r.charAt(0)=="$"||r.search(/^ng[A-Z]/)!=-1)return;var i=e(t,n[r],!0,!0);t.$$radianVars[r]={fvs:i[1],expr:n[r]},t[r]=i[0];var s=t.$$radianVars[r];s.fvwatchers={},s.fvs.forEach(function(n){s.fvwatchers[n]=t.$watch(n,function(){t[r]=e(t,s.expr)},!0)}),n.$observe(r,function(n){s.expr=n;var i=e(t,n,!0);t[r]=i[0],s.fvs=i[1],Object.keys(s.fvwatchers).forEach(function(e){s.fvs.indexOf(e)==-1&&(s.fvwatchers[e](),delete s.fvwatchers[e])}),s.fvs.forEach(function(n){s.fvwatchers[n]||(s.fvwatchers[n]=t.$watch(n,function(){t[r]=e(t,s.expr)},!0))})})})}}]),radian.directive("plot",["processAttrs","$timeout","$rootScope","dumpScope","dft","radianLegend",function(e,t,n,r,i,s){"use strict";function o(t,n,r,i){e(t,r);var s=300,o=1.618,u=o*s,a=r.width,f=r.height,l=r.aspect,c=n.width(),h=n.height(),p=n.css("aspect")?parseFloat(n.css("aspect")):null;a&&f&&l||f&&a?(s=f,u=a,o=u/s):f&&l?(s=f,o=l,u=s*o):a&&l?(u=a,o=l,s=u/o):f?(s=f,c?(u=c,o=u/s):p?(o=p,u=s*o):u=s*o):a?(u=a,h?(s=h,o=u/s):p?(o=p,s=u/o):s=u/o):l?(o=l,c?(u=c,s=u/o):h?(s=h,u=s*o):u=s*o):h&&c?(s=h,u=c,o=u/s):h&&p?(s=h,o=p,u=s*o):c&&p?(u=c,o=p,s=u/o):h?(s=h,u=s*o):c?(u=c,s=u/o):p&&(o=p,s=u/o),t.width=u,t.height=s,t.svg=n.children()[1],$(n).css("width",u).css("height",s),t.views=[],t.switchable=[],t.addPlot=function(e){t.hasOwnProperty("legendSwitches")&&t.switchable.push(e),e.enabled=!0},i(t.$new(),function(e){n.append(e)})}function u(e,n){function r(){e.views.forEach(function(t){f(t,e)})}function i(){e.views=l.map(function(t,n){return a(e,t,n,l.length)}),c&&c(),r()}var o=d3.select(e.svg);e.uivisible&&(e.height-=parseInt($(n.children()[0]).css("height"))),o.attr("width",e.width).attr("height",e.height);var u=o.append("g").attr("width",e.width).attr("height",e.height),l=[u],c=null;if(e.hasOwnProperty("zoomX")){var h=e.zoomFraction||.2;h=Math.min(.95,Math.max(.05,h));var p=(e.height-6)*h,d=(e.height-6)*(1-h),v=o.append("g").attr("transform","translate(0,"+(d+6)+")").attr("width",e.width).attr("height",p);l.push(v),l[0].attr("height",d),c=function(){o.append("defs").append("clipPath").attr("id","xzoomclip").append("rect").attr("width",e.views[0].realwidth).attr("height",e.views[0].realheight),e.views[0].clip="xzoomclip";var t=d3.svg.brush().x(e.views[1].x);t.on("brush",function(){e.views[0].x.domain(t.empty()?e.views[1].x.domain():t.extent()),f(e.views[0],e)}),e.views[1].post=function(n){n.append("g").attr("class","x brush").call(t).selectAll("rect").attr("y",-6).attr("height",e.views[1].realheight+7)}}}t(function(){i(),s(o,e),e.$on("paintChange",r),e.$on("dataChange",i),e.$watch("strokesel",r),e.$watch("xidx",i),e.$watch("yidx",i)},0)}function a(e,t,n,r){function m(e){return e[0]instanceof Array?d3.merge(e.map(function(e){return d3.extent(e)})):d3.extent(e)}function g(e,t,n,r){return e[0]instanceof Array?d3.merge(e.map(function(e){return d3.extent(e.filter(function(e,i){return t[i]>=n&&t[i]<=r}))})):d3.extent(e.filter(function(e,i){return t[i]>=n&&t[i]<=r}))}function O(){w?s.x=d3.time.scale().range([0,s.realwidth]).domain(e.xextent):L=="log"?s.x=d3.scale.log().range([0,s.realwidth]).domain(e.xextent).clamp(!0):s.x=d3.scale.linear().range([0,s.realwidth]).domain(e.xextent).clamp(!0)}function M(){x?s.x2=d3.time.scale().range([0,s.realwidth]).domain(e.x2extent):L=="log"?s.x2=d3.scale.log().range([0,s.realwidth]).domain(e.x2extent).clamp(!0):s.x2=d3.scale.linear().range([0,s.realwidth]).domain(e.x2extent).clamp(!0)}function _(){A=="log"?s.y=d3.scale.log().range([s.realheight,0]).domain(e.yextent).clamp(!0):s.y=d3.scale.linear().range([s.realheight,0]).domain(e.yextent).clamp(!0)}function D(){A=="log"?s.y2=d3.scale.log().range([s.realheight,0]).domain(e.y2extent).clamp(!0):s.y2=d3.scale.linear().range([s.realheight,0]).domain(e.y2extent).clamp(!0)}function P(t,n,r,s,o){var u=null;if(!t){i(e,function(e){t||e[n]&&e[n].metadata&&e[n].metadata.label&&(t=e[n].metadata.label,e[n].metadata.units&&(t+=" ("+e[n].metadata.units+")")),u=u||e[r]});if(!t&&e[s]){var a=e[s].split(",");t=a[u]}t||(t=o)}return t}var s={svg:t};if(e.hasOwnProperty("range")||e.hasOwnProperty("rangeX")||e.hasOwnProperty("rangeY")){var o,u;if(e.hasOwnProperty("range")){var a=e.range.split(";");a.length==2&&(o=a[0],u=a[1])}e.hasOwnProperty("rangeX")&&(o=e.rangeX),e.hasOwnProperty("rangeY")&&(u=e.rangeY);if(o){var l=o.split(","),c=parseFloat(l[0]),h=parseFloat(l[1]);!isNaN(c)&&!isNaN(h)&&(e.hasXRange=!0,e.xextent=[c,h])}if(u){var p=u.split(","),d=parseFloat(p[0]),v=parseFloat(p[1]);!isNaN(d)&&!isNaN(v)&&(e.hasYRange=!0,e.yextent=[d,v])}}var y=[],b=[],w=!1,E=[],S=[],x=!1;i(e,function(t){!e.xextent&&t.enabled&&t.x&&(y=y.concat(m(t.x))),!e.x2extent&&t.enabled&&t.x2&&(E=E.concat(m(t.x2))),!e.yextent&&t.enabled&&t.y&&(e.xextent?b=b.concat(g(t.y,t.x,e.xextent[0],e.xextent[1])):b=b.concat(m(t.y))),!e.y2extent&&t.enabled&&t.y2&&(e.xextent?S=S.concat(g(t.y2,t.x,e.xextent[0],e.xextent[1])):S=S.concat(m(t.y2))),t.x&&t.x.metadata&&t.x.metadata.format=="date"&&(w=!0),t.x2&&t.x2.metadata&&t.x2.metadata.format=="date"&&(x=!0)}),!e.xextent&&y.length>0&&(e.xextent=d3.extent(y)),!e.yextent&&b.length>0&&(e.yextent=d3.extent(b)),!e.x2extent&&E.length>0&&(e.x2extent=d3.extent(E)),!e.y2extent&&S.length>0&&(e.y2extent=d3.extent(S)),s.xaxis=!e.axisX||e.axisX!="off",s.yaxis=!e.axisY||e.axisY!="off",s.x2axis=e.x2extent&&(!e.axisX2||e.axisX2!="off"),s.y2axis=e.y2extent&&(!e.axisY2||e.axisY2!="off");var T=(r==1||r==2&&n==1)&&(!e.axisXLabel||e.axisXLabel!="off"),N=!e.axisYLabel||e.axisYLabel!="off",C=(r==1||r==2&&n==1)&&(!e.axisX2Label||e.axisX2Label!="off"),k=!e.axisY2Label||e.axisY2Label!="off";s.margin={top:e.topMargin||2,right:e.rightMargin||10,bottom:e.bottomMargin||2,left:e.leftMargin||2};var L=e.axisXTransform||"linear",A=e.axisYTransform||"linear";return s.xaxis&&(s.margin.bottom+=20+(T?15:0)),s.yaxis&&(s.margin.left+=30+(N?22:0)),s.x2axis&&(s.margin.top+=20+(C?15:0)),s.y2axis&&(s.margin.right+=30+(k?22:0)),s.realwidth=s.svg.attr("width")-s.margin.left-s.margin.right,s.realheight=s.svg.attr("height")-s.margin.top-s.margin.bottom,s.outw=s.realwidth+s.margin.left+s.margin.right,s.outh=s.realheight+s.margin.top+s.margin.bottom,O(),_(),e.x2extent&&M(),e.y2extent&&D(),e.hasOwnProperty("axisXTransform")&&e.$watch("axisXTransform",function(t,n){L=t||"linear",O(),e.x2&&M(),e.views.forEach(function(t){f(t,e)})}),e.hasOwnProperty("axisYTransform")&&e.$watch("axisYTransform",function(t,n){A=t||"linear",_(),e.y2&&D(),e.views.forEach(function(t){f(t,e)})}),T&&(s.xlabel=P(e.axisXLabel,"x","xidx","selectX","X Axis")),N&&(s.ylabel=P(e.axisYLabel,"y","yidx","selectY","Y Axis")),C&&(s.x2label=P(e.axisX2Label,"x2","xidx","selectX2","X2 Axis")),k&&(s.y2label=P(e.axisY2Label,"y2","yidx","selectY2","Y2 Axis")),s}function f(e,t){$(e.svg[0]).empty();var n=e.svg.append("g").attr("width",e.outw).attr("height",e.outh),r=n.append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")");e.innersvg=r,e.clip&&r.attr("clip-path","url(#"+e.clip+")");if(e.xaxis&&e.x){var s=d3.svg.axis().scale(e.x).orient("bottom").ticks(n.attr("width")/100),o="%Y-%m-%d",u=!1;i(t,function(e){var t=e.x;t&&t.metadata&&t.metadata.format=="date"&&(t.metadata.dateFormat&&(o=t.metadata.dateFormat),u=!0),u=!1}),u&&s.tickFormat(d3.time.format(o)),n.append("g").attr("class","axis").attr("transform","translate("+e.margin.left+","+(+e.realheight+4)+")").call(s);if(e.xlabel)var a=0,f=35;n.append("g").attr("class","axis-label").attr("transform","translate("+(+e.margin.left+e.realwidth/2)+","+e.realheight+")").append("text").attr("x",a).attr("y",f).attr("text-anchor","middle").text(e.xlabel)}if(e.x2axis&&e.x2){var s=d3.svg.axis().scale(e.x2).orient("top").ticks(n.attr("width")/100),o="%Y-%m-%d",u=!1;i(t,function(e){var t=e.x2;t&&t.metadata&&t.metadata.format=="date"&&(t.metadata.dateFormat&&(o=t.metadata.dateFormat),u=!0),u=!1}),u&&s.tickFormat(d3.time.format(o)),n.append("g").attr("class","axis").attr("transform","translate("+e.margin.left+",4)").call(s);if(e.x2label)var a=0,f=35;n.append("g").attr("class","axis-label").attr("transform","translate("+(+e.margin.left+e.realwidth/2)+",0)").append("text").attr("x",a).attr("y",f).attr("text-anchor","middle").text(e.x2label)}if(e.yaxis&&e.y){var s=d3.svg.axis().scale(e.y).orient("left").ticks(n.attr("height")/36);n.append("g").attr("class","axis").attr("transform","translate("+(+e.margin.left-4)+",0)").call(s);if(e.ylabel){var a=12,f=e.realheight/2;n.append("g").attr("class","axis-label").append("text").attr("x",a).attr("y",f).attr("transform","rotate(-90,"+a+","+f+")").attr("text-anchor","middle").text(e.ylabel)}}if(e.y2axis&&e.y2){var s=d3.svg.axis().scale(e.y2).orient("right").ticks(n.attr("height")/36);n.append("g").attr("class","axis").attr("transform","translate("+(+e.realwidth+e.margin.left)+",0)").call(s);if(e.y2label){var a=e.realwidth+e.margin.left+40,f=e.realheight/2;n.append("g").attr("class","axis-label").append("text").attr("x",a).attr("y",f).attr("transform","rotate(-90,"+a+","+f+")").attr("text-anchor","middle").text(e.y2label)}}if(e.x&&e.y||e.x2&&e.y||e.x&&e.y2||e.x2&&e.y2)i(t,function(t){if(t.draw&&t.enabled){var n=!1,i=!1,s,o;t.x&&(n="x",s=e.x),t.x2&&(n="x2",s=e.x2),t.y&&(i="y",o=e.y),t.y2&&(i="y2",o=e.y2);if(n&&i){var u=r.append("g"),a=t[n][0]instanceof Array?t[n][t.xidx?t.xidx:0]:t[n],f=t[i][0]instanceof Array?t[i][t.yidx?t.yidx:0]:t[i];t.draw(u,a,s,f,o,t),t.$on("$destroy",function(){u.remove()})}}}),e.post&&e.post(e.innersvg)}return{restrict:"E",template:['<div class="radian">',"<radian-ui></radian-ui>","<svg></svg>","</div>"].join(""),replace:!0,transclude:!0,scope:!0,compile:function(e,t,n){return{pre:function(e,t,r){o(e,t,r,n)},post:u}}}}]),radian.factory("plotTypeLink",["processAttrs",function(e){var t=["orientation","fill","fillOpacity","label","marker","markerSize","stroke","strokeOpacity","strokeWidth"];return function(n,r,i,s){e(n,i),r.hide(),n.draw=s,n.$parent.addPlot(n),n.$watch("x",function(){n.$emit("dataChange",n)}),n.$watch("y",function(){n.$emit("dataChange",n)}),t.forEach(function(e){n.hasOwnProperty(e)&&n.$watch(e,function(){n.$emit("paintChange",n)})})}}]),radian.directive("plotOptions",["processAttrs",function(e){"use strict";return{restrict:"E",template:"<div ng-transclude></div>",replace:!0,transclude:!0,scope:!1,link:function(t,n,r){e(t,r)}}}]),radian.factory("radianEval",["$rootScope","plotLib","radianParse",function($rootScope,plotLib,radianParse){var excnames=["Arguments","Array","Boolean","Date","Error","EvalError","Function","Global","JSON","Math","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError"],radianEval=function(scope,inexpr,returnfvs,skiperrors){if(typeof inexpr!="string"||inexpr.substr(0,2)!="[["&&inexpr.substr(-2)!="]]")return returnfvs?[inexpr,[]]:inexpr;var expr=inexpr.substr(2,inexpr.length-4);if(expr=="")return returnfvs?[0,[]]:0;var ast=radianParse(expr);estraverse.traverse(ast,{leave:function(e){delete e.start,delete e.end}});var metadatakey=null,dataset=null;estraverse.traverse(ast,{enter:function(e){if(e.type!="PluckExpression"&&e.type!="MemberExpression")return estraverse.VisitorOption.Skip;if(e.property.type=="Identifier"){metadatakey=e.property.name;var t=e.object;while(t.type!="Identifier")t=t.object;return dataset=t.name,estraverse.VisitorOption.Break}}});var exc={},excstack=[],fvs={};excnames.forEach(function(e){exc[e]=1}),Object.keys(plotLib).forEach(function(e){exc[e]=1}),estraverse.traverse(ast,{enter:function(e,t){switch(e.type){case"FunctionExpression":excstack.push(e.params.map(function(e){return e.name})),e.params.forEach(function(e){exc[e.name]?++exc[e.name]:exc[e.name]=1});break;case"Identifier":if(!exc[e.name]){var n=!0;t&&(t.type=="MemberExpression"||t.type=="PluckExpression")&&e==t.property&&!t.computed&&(n=!1),n&&(fvs[e.name]=1)}}},leave:function(e){e.type=="FunctionExpression"&&excstack.pop().forEach(function(e){--exc[e]==0&&delete exc[e]})}});var astrepl=estraverse.replace(ast,{leave:function(e){if(e.type=="BinaryExpression"){var t="";switch(e.operator){case"+":t="rad$$add";break;case"-":t="rad$$sub";break;case"*":t="rad$$mul";break;case"/":t="rad$$div";break;case"**":t="rad$$pow"}return t?{type:"CallExpression",callee:{type:"Identifier",name:t},arguments:[e.left,e.right]}:e}return e.type=="UnaryExpression"&&e.operator=="-"?{type:"CallExpression",callee:{type:"Identifier",name:"rad$$neg"},arguments:[e.argument]}:e}});astrepl=estraverse.replace(astrepl,{enter:function(e){return e.type=="CallExpression"&&e.callee.type=="PluckExpression"?{type:"CallExpression",callee:{type:"MemberExpression",object:e.callee.object,property:{type:"Identifier",name:"map"},computed:!1},arguments:[{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"$$x"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"$$x"},property:e.callee.property,computed:!1},arguments:e.arguments}}]}}]}:e},leave:function(e){if(e.type=="PluckExpression")return{type:"CallExpression",callee:{type:"MemberExpression",object:e.object,property:{type:"Identifier",name:"map"},computed:!1},arguments:[{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"$$x"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"MemberExpression",object:{type:"Identifier",name:"$$x"},property:e.property,computed:!1}}]}}]}}}),astrepl=estraverse.replace(astrepl,{enter:function(e,t){switch(e.type){case"FunctionExpression":excstack.push(e.params.map(function(e){return e.name})),e.params.forEach(function(e){exc[e.name]?++exc[e.name]:exc[e.name]=1});break;case"Identifier":if(!exc[e.name]&&fvs[e.name])return{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"scope"},property:{type:"Identifier",name:"$eval"},computed:!1},arguments:[{type:"Literal",value:e.name,raw:"'"+e.name+"'"}]}}return e},leave:function(e){return e.type=="FunctionExpression"&&excstack.pop().forEach(function(e){--exc[e]==0&&delete exc[e]}),e}});var access=escodegen.generate(astrepl),ret=[];try{with(plotLib)eval("ret = "+access)}catch(e){if(!skiperrors)throw Error("radianEval failed on '"+expr+"' -- "+e.message)}return ret&&dataset&&metadatakey&&$rootScope[dataset]&&$rootScope[dataset].metadata&&$rootScope[dataset].metadata[metadatakey]&&(ret.metadata=$rootScope[dataset].metadata[metadatakey]),returnfvs?[ret,Object.keys(fvs)]:ret};return radianEval}]),radian.factory("radianParse",function(){"use strict";function i(n,r){function c(e){return Zt(e),i.start=o,i.end=u,i.type=a,i.value=f,i}e=String(n),t=e.length,It();var i={};return c.jumpTo=function(t,n){s=t;var r=e.charAt(t-1);l=n,zt()},c}function g(t,n){var i=r(e,t);n+=" ("+i.line+":"+i.column+")";var o=new SyntaxError(n);throw o.pos=t,o.loc=i,o.raisedAt=s,o}function Nt(e){function o(e){if(e.length==1)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}e=e.split(" ");var t="",n=[],r;for(var i=0;i<e.length;++i){r=!1;for(var s=0;s<n.length;++s)if(n[s][0].length==e[i].length){n[s].push(e[i]),r=!0;break}r||n.push([e[i]]),r=!1}if(n.length>3){n.sort(function(e,t){return t.length-e.length}),t+="switch(str.length){";for(var i=0;i<n.length;++i){var u=n[i];t+="case "+u[0].length+":",o(u)}t+="}"}else o(e);return new Function("str",t)}function jt(e){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e>=170&&Dt.test(String.fromCharCode(e))}function Ft(e){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e>=170&&Pt.test(String.fromCharCode(e))}function It(){s=0,l=!0,zt()}function qt(e,t){u=s,a=e,zt(),f=t,l=e.beforeExpr}function Rt(){var t=e.indexOf("*/",s+=2);t===-1&&g(s-2,"Unterminated comment"),s=t+2}function Ut(){var n=e.charCodeAt(s+=2);while(s<t&&n!==10&&n!==13&&n!==8232&&n!==8329)++s,n=e.charCodeAt(s)}function zt(){while(s<t){var n=e.charCodeAt(s);if(n===32)++s;else if(n===13){++s;var r=e.charCodeAt(s);r===10&&++s}else if(n===10)++s;else if(n<14&&n>8)++s;else if(n===47){var r=e.charCodeAt(s+1);if(r===42)Rt();else{if(r!==47)break;Ut()}}else if(n<14&&n>8||n===32||n===160)++s;else{if(!(n>=5760&&Ot.test(String.fromCharCode(n))))break;++s}}}function Wt(){var t=e.charCodeAt(s+1);return t>=48&&t<=57?sn(!0):(++s,qt(it))}function Xt(){var t=e.charCodeAt(s+1);return l?(++s,tn()):t===61?en(ft,2):en(ut,1)}function Vt(){var t=e.charCodeAt(s+1);if(t===61)return en(ft,2);if(t===42){var n=e.charCodeAt(s+2);return t===61?en(ft,3):en(St,2)}return en(Et,1)}function $t(t){var n=e.charCodeAt(s+1);return n===t?en(t===124?pt:dt,2):n===61?en(ft,2):en(t===124?vt:gt,1)}function Jt(){var t=e.charCodeAt(s+1);return t===61?en(ft,2):en(mt,1)}function Kt(t){var n=e.charCodeAt(s+1);return n===t?en(ct,2):n===61?en(ft,2):en(lt,1)}function Qt(t){var n=e.charCodeAt(s+1),r=1;return n===t?(r=t===62&&e.charCodeAt(s+2)===62?3:2,e.charCodeAt(s+r)===61?en(ft,r+1):en(wt,r)):(n===61&&(r=e.charCodeAt(s+2)===61?3:2),en(bt,r))}function Gt(t){var n=e.charCodeAt(s+1);return n===61?en(yt,e.charCodeAt(s+2)===61?3:2):en(t===61?at:ht,1)}function Yt(t){switch(t){case 46:return Wt();case 35:return++s,qt(ot);case 40:return++s,qt(Z);case 41:return++s,qt(et);case 59:return++s,qt(nt);case 44:return++s,qt(tt);case 91:return++s,qt(K);case 93:return++s,qt(Q);case 123:return++s,qt(G);case 125:return++s,qt(Y);case 58:return++s,qt(rt);case 63:return++s,qt(st);case 48:var n=e.charCodeAt(s+1);if(n===120||n===88)return rn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return sn(!1);case 34:case 39:return un(t);case 47:return Xt(t);case 37:case 42:return Vt();case 124:case 38:return $t(t);case 94:return Jt();case 43:case 45:return Kt(t);case 60:case 62:return Qt(t);case 61:case 33:return Gt(t);case 126:return en(ht,1)}return!1}function Zt(n){o=s;if(n)return tn();if(s>=t)return qt(S);var r=e.charCodeAt(s);if(jt(r)||r===92)return cn();var i=Yt(r);if(i===!1){var u=String.fromCharCode(r);if(u==="\\"||Dt.test(u))return cn();g(s,"Unexpected character '"+u+"'")}return i}function en(t,n){var r=e.slice(s,s+n);s+=n,qt(t,r)}function tn(){var n="",r,i,o=s;for(;;){s>=t&&g(o,"Unterminated regular expression");var u=e.charAt(s);Ht.test(u)&&g(o,"Unterminated regular expression");if(!r){if(u==="[")i=!0;else if(u==="]"&&i)i=!1;else if(u==="/"&&!i)break;r=u==="\\"}else r=!1;++s}var n=e.slice(o,s);++s;var a=ln();return a&&!/^[gmsiy]*$/.test(a)&&g(o,"Invalid regexp flag"),qt(b,new RegExp(n,a))}function nn(t,n){var r=s,i=0;for(var o=0,u=n==null?Infinity:n;o<u;++o){var a=e.charCodeAt(s),f;a>=97?f=a-97+10:a>=65?f=a-65+10:a>=48&&a<=57?f=a-48:f=Infinity;if(f>=t)break;++s,i=i*t+f}return s===r||n!=null&&s-r!==n?null:i}function rn(){s+=2;var t=nn(16);return t==null&&g(o+2,"Expected hexadecimal number"),jt(e.charCodeAt(s))&&g(s,"Identifier directly after number"),qt(y,t)}function sn(t){var n=s,r=!1,i=e.charCodeAt(s)===48;!t&&nn(10)===null&&g(n,"Invalid number"),e.charCodeAt(s)===46&&(++s,nn(10),r=!0);var o=e.charCodeAt(s);if(o===69||o===101)o=e.charCodeAt(++s),(o===43||o===45)&&++s,nn(10)===null&&g(n,"Invalid number"),r=!0;jt(e.charCodeAt(s))&&g(s,"Identifier directly after number");var u=e.slice(n,s),a;return r?a=parseFloat(u):!i||u.length===1?a=parseInt(u,10):/[89]/.test(u)||m?g(n,"Invalid number"):a=parseInt(u,8),qt(y,a)}function un(n){s++,on.length=0;for(;;){s>=t&&g(o,"Unterminated string constant");var r=e.charCodeAt(s);if(r===n)return++s,qt(w,String.fromCharCode.apply(null,on));if(r===92){r=e.charCodeAt(++s);var i=/^[0-7]+/.exec(e.slice(s,s+3));i&&(i=i[0]);while(i&&parseInt(i,8)>255)i=i.slice(0,i.length-1);i==="0"&&(i=null),++s;if(i)m&&g(s-2,"Octal literal in strict mode"),on.push(parseInt(i,8)),s+=i.length-1;else switch(r){case 110:on.push(10);break;case 114:on.push(13);break;case 120:on.push(an(2));break;case 117:on.push(an(4));break;case 85:on.push(an(8));break;case 116:on.push(9);break;case 98:on.push(8);break;case 118:on.push(11);break;case 102:on.push(12);break;case 48:on.push(0);break;case 13:e.charCodeAt(s)===10&&++s;case 10:break;default:on.push(r)}}else(r===13||r===10||r===8232||r===8329)&&g(o,"Unterminated string constant"),on.push(r),++s}}function an(e){var t=nn(16,e);return t===null&&g(o,"Bad character escape sequence"),t}function ln(){fn=!1;var t,n=!0,r=s;for(;;){var i=e.charCodeAt(s);if(Ft(i))fn&&(t+=e.charAt(s)),++s;else{if(i!==92)break;fn||(t=e.slice(r,s)),fn=!0,e.charCodeAt(++s)!=117&&g(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var o=an(4),u=String.fromCharCode(o);u||g(s-1,"Invalid Unicode escape"),(n?!jt(o):!Ft(o))&&g(s-4,"Invalid Unicode escape"),t+=u}n=!1}return fn?t:e.slice(r,s)}function cn(){var e=ln(),t=E;return fn||(At(e)?t=J[e]:m&&kt(e)&&g(o,"The keyword '"+e+"' is reserved")),qt(t,e)}function hn(){c=o,h=u,Zt()}function pn(e){m=e,s=h,zt(),Zt()}function dn(){this.type=null,this.start=o,this.end=null}function vn(){this.start=tokStartLoc,this.end=null}function mn(){return new dn}function gn(e){var t=new dn;return t.start=e.start,t}function yn(e,t){return e.type=t,e.end=h,e}function bn(e){return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&e.expression.value==="use strict"}function wn(e){if(a===e)return hn(),!0}function En(){return a===S||a===Y||Ht.test(e.slice(h,o))}function Sn(){!wn(nt)&&!En()&&Tn()}function xn(e){a===e?hn():Tn()}function Tn(){g(o,"Unexpected token")}function Nn(e){e.type!=="Identifier"&&e.type!=="MemberExpression"&&g(e.start,"Assigning to rvalue"),m&&e.type==="Identifier"&&Lt(e.name)&&g(e.start,"Assigning to "+e.name+" in strict mode")}function Cn(){return c=h=s,d=m=null,v=[],Zt(),Hn()}function An(){a===ut&&Zt(!0);var t=a,n=mn();switch(t){case x:case C:hn();var r=t===x;wn(nt)||En()?n.label=null:a!==E?Tn():(n.label=Kn(),Sn());for(var i=0;i<v.length;++i){var s=v[i];if(n.label==null||s.name===n.label.name){if(!(s.kind==null||!r&&s.kind!=="loop"))break;if(n.label&&r)break}}return i===v.length&&g(n.start,"Unsyntactic "+t.keyword),yn(n,r?"BreakStatement":"ContinueStatement");case k:return hn(),Sn(),yn(n,"DebuggerStatement");case A:return hn(),v.push(kn),n.body=An(),v.pop(),xn(q),n.test=On(),Sn(),yn(n,"DoWhileStatement");case _:hn(),v.push(kn),xn(Z);if(a===nt)return _n(n,null);if(a===I){var u=mn();return hn(),Pn(u,!0),u.declarations.length===1&&wn($)?Dn(n,u):_n(n,u)}var u=Hn(!1,!0);if(wn($))return Nn(u),Dn(n,u);return _n(n,u);case D:return hn(),$n(n,!0);case P:return hn(),n.test=On(),n.consequent=An(),n.alternate=wn(O)?An():null,yn(n,"IfStatement");case H:return d||g(o,"'return' outside of function"),hn(),wn(nt)||En()?n.argument=null:(n.argument=Hn(),Sn()),yn(n,"ReturnStatement");case B:hn(),n.discriminant=On(),n.cases=[],xn(G),v.push(Ln);for(var l,p;a!=Y;)if(a===T||a===L){var y=a===T;l&&yn(l,"SwitchCase"),n.cases.push(l=mn()),l.consequent=[],hn(),y?l.test=Hn():(p&&g(c,"Multiple default clauses"),p=!0,l.test=null),xn(rt)}else l||Tn(),l.consequent.push(An());return l&&yn(l,"SwitchCase"),hn(),v.pop(),yn(n,"SwitchStatement");case j:return hn(),Ht.test(e.slice(h,o))&&g(h,"Illegal newline after throw"),n.argument=Hn(),Sn(),yn(n,"ThrowStatement");case F:hn(),n.block=Mn(),n.handlers=[];while(a===N){var b=mn();hn(),xn(Z),b.param=Kn(),m&&Lt(b.param.name)&&g(b.param.start,"Binding "+b.param.name+" in strict mode"),xn(et),b.guard=null,b.body=Mn(),n.handlers.push(yn(b,"CatchClause"))}return n.finalizer=wn(M)?Mn():null,!n.handlers.length&&!n.finalizer&&g(n.start,"Missing catch or finally clause"),yn(n,"TryStatement");case I:return hn(),n=Pn(n),Sn(),n;case q:return hn(),n.test=On(),v.push(kn),n.body=An(),v.pop(),yn(n,"WhileStatement");case R:return m&&g(o,"'with' in strict mode"),hn(),n.object=On(),n.body=An(),yn(n,"WithStatement");case G:return Mn();case nt:return hn(),yn(n,"EmptyStatement");default:var w=f,S=Hn();if(t===E&&S.type==="Identifier"&&wn(rt)){for(var i=0;i<v.length;++i)v[i].name===w&&g(S.start,"Label '"+w+"' is already declared");var U=a.isLoop?"loop":a===B?"switch":null;return v.push({name:w,kind:U}),n.body=An(),v.pop(),n.label=S,yn(n,"LabeledStatement")}return n.expression=S,Sn(),yn(n,"ExpressionStatement")}}function On(){xn(Z);var e=Hn();return xn(et),e}function Mn(e){var t=mn(),n=!0,r=!1,i;t.body=[],xn(G);while(!wn(Y)){var s=An();t.body.push(s),n&&bn(s)&&(i=r,pn(r=!0)),n=!1}return r&&!i&&pn(!1),yn(t,"BlockStatement")}function _n(e,t){return e.init=t,xn(nt),e.test=a===nt?null:Hn(),xn(nt),e.update=a===et?null:Hn(),xn(et),e.body=An(),v.pop(),yn(e,"ForStatement")}function Dn(e,t){return e.left=t,e.right=Hn(),xn(et),e.body=An(),v.pop(),yn(e,"ForInStatement")}function Pn(e,t){e.declarations=[],e.kind="var";for(;;){var n=mn();n.id=Kn(),m&&Lt(n.id.name)&&g(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=wn(at)?Hn(!0,t):null,e.declarations.push(yn(n,"VariableDeclarator"));if(!wn(tt))break}return yn(e,"VariableDeclaration")}function Hn(e,t){var n=Bn(t);if(!e&&a===tt){var r=gn(n);r.expressions=[n];while(wn(tt))r.expressions.push(Bn(t));return yn(r,"SequenceExpression")}return n}function Bn(e){var t=jn(e);if(a.isAssign){var n=gn(t);return n.operator=f,n.left=t,hn(),n.right=Bn(e),Nn(t),yn(n,"AssignmentExpression")}return t}function jn(e){var t=Fn(e);if(wn(st)){var n=gn(t);return n.test=t,n.consequent=Hn(!0),xn(rt),n.alternate=Hn(!0,e),yn(n,"ConditionalExpression")}return t}function Fn(e){return In(qn(e),-1,e)}function In(e,t,n){var r=a.binop;if(r!=null&&(!n||a!==$)&&r>t){var i=gn(e);i.left=e,i.operator=f,hn(),i.right=In(qn(n),r,n);var i=yn(i,/&&|\|\|/.test(i.operator)?"LogicalExpression":"BinaryExpression");return In(i,t,n)}return e}function qn(e){if(a.prefix){var t=mn(),n=a.isUpdate;return t.operator=f,t.prefix=!0,hn(),t.argument=qn(e),n?Nn(t.argument):m&&t.operator==="delete"&&t.argument.type==="Identifier"&&g(t.start,"Deleting local variable in strict mode"),yn(t,n?"UpdateExpression":"UnaryExpression")}var r=Rn();while(a.postfix&&!En()){var t=gn(r);t.operator=f,t.prefix=!1,t.argument=r,Nn(r),hn(),r=yn(t,"UpdateExpression")}return r}function Rn(){return Un(zn())}function Un(e,t){if(wn(it)){var n=gn(e);return n.object=e,n.property=Kn(!0),n.computed=!1,Un(yn(n,"MemberExpression"),t)}if(wn(ot)){var n=gn(e);return n.object=e,n.property=Kn(!0),n.computed=!1,Un(yn(n,"PluckExpression"),t)}if(wn(K)){var n=gn(e);return n.object=e,n.property=Hn(),n.computed=!0,xn(Q),Un(yn(n,"MemberExpression"),t)}if(!t&&wn(Z)){var n=gn(e);return n.callee=e,n.arguments=Jn(et),Un(yn(n,"CallExpression"),t)}return e}function zn(){switch(a){case z:var t=mn();return hn(),yn(t,"ThisExpression");case E:return Kn();case y:case w:case b:var t=mn();return t.value=f,t.raw=e.slice(o,u),hn(),yn(t,"Literal");case W:case X:case V:var t=mn();return t.value=a.atomValue,t.raw=a.keyword,hn(),yn(t,"Literal");case Z:var n=tokStartLoc,r=o;hn();var i=Hn();return i.start=r,i.end=u,xn(et),i;case K:var t=mn();return hn(),t.elements=Jn(Q,!0),yn(t,"ArrayExpression");case G:return Xn();case D:var t=mn();return hn(),$n(t,!1);case U:return Wn();default:Tn()}}function Wn(){var e=mn();return hn(),e.callee=Un(zn(),!0),wn(Z)?e.arguments=Jn(et):e.arguments=[],yn(e,"NewExpression")}function Xn(){var e=mn(),t=!0,n=!1;e.properties=[],hn();while(!wn(Y)){t?t=!1:xn(tt);var r={key:Vn()},i=!1,s;wn(rt)?(r.value=Hn(!0),s=r.kind="init"):r.key.type!=="Identifier"||r.key.name!=="get"&&r.key.name!=="set"?Tn():(i=n=!0,s=r.kind=r.key.name,r.key=Vn(),a!==Z&&Tn(),r.value=$n(mn(),!1));if(r.key.type==="Identifier"&&(m||n))for(var o=0;o<e.properties.length;++o){var u=e.properties[o];if(u.key.name===r.key.name){var f=s==u.kind||i&&u.kind==="init"||s==="init"&&(u.kind==="get"||u.kind==="set");f&&!m&&s==="init"&&u.kind==="init"&&(f=!1),f&&g(r.key.start,"Redefinition of property")}}e.properties.push(r)}return yn(e,"ObjectExpression")}function Vn(){return a===y||a===w?zn():Kn(!0)}function $n(e,t){a===E?e.id=Kn():t?Tn():e.id=null,e.params=[];var n=!0;xn(Z);while(!wn(et))n?n=!1:xn(tt),e.params.push(Kn());var r=d,i=v;d=!0,v=[],e.body=Mn(!0),d=r,v=i;if(m||e.body.body.length&&bn(e.body.body[0]))for(var s=e.id?-1:0;s<e.params.length;++s){var o=s<0?e.id:e.params[s];(kt(o.name)||Lt(o.name))&&g(o.start,"Defining '"+o.name+"' in strict mode");if(s>=0)for(var u=0;u<s;++u)o.name===e.params[u].name&&g(o.start,"Argument name clash in strict mode")}return yn(e,t?"FunctionDeclaration":"FunctionExpression")}function Jn(e,t){var n=[],r=!0;while(!wn(e))r?r=!1:xn(tt),t&&a===tt?n.push(null):n.push(Hn(!0));return n}function Kn(e){var t=mn();return t.name=a===E?f:e&&a.keyword||Tn(),hn(),yn(t,"Identifier")}var e,t,n=function(n){return e=String(n),t=e.length,It(),Cn()},r=function(e,t){for(var n=1,r=0;;){Bt.lastIndex=r;var i=Bt.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}},s,o,u,a,f,l,c,h,p,d,v,m,y={type:"num"},b={type:"regexp"},w={type:"string"},E={type:"name"},S={type:"eof"},x={keyword:"break"},T={keyword:"case",beforeExpr:!0},N={keyword:"catch"},C={keyword:"continue"},k={keyword:"debugger"},L={keyword:"default"},A={keyword:"do",isLoop:!0},O={keyword:"else",beforeExpr:!0},M={keyword:"finally"},_={keyword:"for",isLoop:!0},D={keyword:"function"},P={keyword:"if"},H={keyword:"return",beforeExpr:!0},B={keyword:"switch"},j={keyword:"throw",beforeExpr:!0},F={keyword:"try"},I={keyword:"var"},q={keyword:"while",isLoop:!0},R={keyword:"with"},U={keyword:"new",beforeExpr:!0},z={keyword:"this"},W={keyword:"null",atomValue:null},X={keyword:"true",atomValue:!0},V={keyword:"false",atomValue:!1},$={keyword:"in",binop:7,beforeExpr:!0},J={"break":x,"case":T,"catch":N,"continue":C,"debugger":k,"default":L,"do":A,"else":O,"finally":M,"for":_,"function":D,"if":P,"return":H,"switch":B,"throw":j,"try":F,"var":I,"while":q,"with":R,"null":W,"true":X,"false":V,"new":U,"in":$,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":z,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},K={type:"[",beforeExpr:!0},Q={type:"]"},G={type:"{",beforeExpr:!0},Y={type:"}"},Z={type:"(",beforeExpr:!0},et={type:")"},tt={type:",",beforeExpr:!0},nt={type:";",beforeExpr:!0},rt={type:":",beforeExpr:!0},it={type:"."},st={type:"?",beforeExpr:!0},ot={type:"#"},ut={binop:10,beforeExpr:!0},at={isAssign:!0,beforeExpr:!0},ft={isAssign:!0,beforeExpr:!0},lt={binop:9,prefix:!0,beforeExpr:!0},ct={postfix:!0,prefix:!0,isUpdate:!0},ht={prefix:!0,beforeExpr:!0},pt={binop:1,beforeExpr:!0},dt={binop:2,beforeExpr:!0},vt={binop:3,beforeExpr:!0},mt={binop:4,beforeExpr:!0},gt={binop:5,beforeExpr:!0},yt={binop:6,beforeExpr:!0},bt={binop:7,beforeExpr:!0},wt={binop:8,beforeExpr:!0},Et={binop:10,beforeExpr:!0},St={binop:11,beforeExpr:!0},xt={bracketL:K,bracketR:Q,braceL:G,braceR:Y,parenL:Z,parenR:et,comma:tt,semi:nt,colon:rt,dot:it,question:st,slash:ut,eq:at,name:E,eof:S,num:y,regexp:b,string:w,hash:ot};for(var Tt in J)xt[Tt]=J[Tt];var Ct=Nt("class enum extends super const export import"),kt=Nt("implements interface let package private protected public static yield"),Lt=Nt("eval arguments"),At=Nt("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ot=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,Mt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_t="ͱ-ʹ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Dt=new RegExp("["+Mt+"]"),Pt=new 
RegExp("["+Mt+_t+"]"),Ht=/[\n\r\u2028\u2029]/,Bt=/\r\n|[\n\r\u2028\u2029]/g,on=[],fn,kn={kind:"loop"},Ln={kind:"switch"};return n}),radian.directive("plotData",[function(){"use strict";function e(e,t,n){function m(e,t,n){function r(e,i){e instanceof Array&&e.length>0?typeof e[0]=="string"&&i?e.forEach(function(t,r){e[r]=n(t)}):e.forEach(function(e){r(e,!1)}):typeof e=="object"&&Object.keys(e).forEach(function(n){r(e[n],n==t)})}r(e,!1)}t.hide();if(!n.name)throw Error("<plot-data> must have NAME attribute");var r=n.name,i=n.format||"json",s=n.separator===""?" ":n.separator||",",o=n.cols;o&&(o=o.split(",").map(function(e){return e.trim()}));var u=["json","csv"];if(u.indexOf(i)==-1)throw Error('invalid FORMAT "'+i+'" in <plot-data>');if(i=="csv"&&!o)throw Error("CSV <plot-data> must have COLS");var a="";t.contents().each(function(e,t){t instanceof Text&&(a+=t.textContent)});var f,l=/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/;switch(i){case"json":try{f=JSON.parse(a)}catch(c){throw Error("invalid JSON data in <plot-data>")}break;case"csv":try{f=$.csv.toArrays(a.replace(/^\s*\n/g,"").split("\n").map(function(e){return e.replace(/^\s+/,"")}).join("\n"),{separator:s});if(f.length>0){if(f[0].length!=o.length)throw Error("mismatch between COLS and CSV data in <plot-data>");var h={},p=[];for(var d=0;d<o.length;++d)h[o[d]]=[],p.push(f[0][d].match(l));for(var v=0;v<f.length;++v)for(var d=0;d<o.length;++d)p[d]?h[o[d]].push(parseFloat(f[v][d])):h[o[d]].push(f[v][d]);f=h}}catch(c){throw Error("invalid CSV data in <plot-data>")}}if(e.$parent[r]&&e.$parent[r].metadata)for(var g in e.$parent[r].metadata){var y=e.$parent[r].metadata[g];if(y.format=="date")if(!y.dateParseFormat)m(f,g,function(e){return new Date(e)});else{var b;y.dateParseFormat=="isodate"?b=d3.time.format.iso.parse:b=d3.time.format(y.dateParseFormat).parse,m(f,g,function(e){return b(e)})}}var y=e.$parent[r]?e.$parent[r].metadata:null;e.$parent[r]=f,y&&(e.$parent[r].metadata=y)}return{restrict:"E",scope:!1,compile:function(t,n,r){return{post:e}}}}]),radian.directive("metadata",[function(){"use strict";return["dateFormat","dateParseFormat","errorFor","format","label","units"],{restrict:"E",scope:!1,link:function(e,t,n){if(!t[0].parentNode||t[0].parentNode.tagName!="PLOT-DATA"||!$(t[0].parentNode).attr("name"))throw Error("<metadata> not properly nested inside <plot-data>");var r=$(t[0].parentNode).attr("name");if(!n.name)throw Error("<metadata> without NAME attribute");var i=n.name,s={};["dateFormat","dateParseFormat","errorFor","format","label","units"].forEach(function(e){n.hasOwnProperty(e)&&(s[e]=n[e])}),e.$parent[r]||(e.$parent[r]={metadata:{}}),e.$parent[r].metadata||(e.$parent[r].metadata={}),e.$parent[r].metadata[i]=s}}}]),radian.directive("lines",["plotTypeLink",function(e){"use strict";function t(e,t,n,r,i,s){var o=s.strokeWidth||1,u=s.strokeOpacity||1,a=(s.stroke||"#000").split(";"),f=a.length==1||!s.strokesel?a[0]:a[s.strokesel%a.length];if(f.indexOf(":")==-1){var l=d3.svg.line().x(function(e){return n(e[0])}).y(function(e){return i(e[1])});e.append("path").datum(d3.zip(t,r)).attr("class","line").attr("d",l).style("fill","none").style("stroke-width",o).style("stroke-opacity",u).style("stroke",f)}else{var c=f.split(":"),h=function(e){return 1-Math.exp(-20*e/(3*t.length))},p=d3.interpolateHsl(c[0],c[1]),d=d3.zip(t,r),v=d3.zip(d,d.slice(1));e.selectAll("path").data(v).enter().append("path").attr("class","line").style("stroke-width",o).style("stroke-opacity",u).style("stroke",function(e,t){return p(h(t))}).attr("d",d3.svg.line().x(function(e){return n(e[0])}).y(function(e){return i(e[1])}))}}return{restrict:"E",scope:!0,link:function(n,r,i){e(n,r,i,t)}}}]),radian.directive("points",["plotTypeLink",function(e){"use strict";function t(e,t,n,r,i,s){var o=s.marker||"circle",u=s.markerSize||1,a=s.stroke||"#000",f=s.strokeWidth||1,l=s.strokeOpacity||1,c=s.fill||"#000",h=s.fillOpacity||1,p=s.orientation||0,d=d3.svg.symbol().type(o).size(u);e.selectAll("path").data(d3.zip(t,r)).enter().append("path").attr("transform",function(e){return"translate("+n(e[0])+","+i(e[1])+")"}).attr("d",d).style("fill",c).style("fillOpacity",h).style("stroke-width",f).style("stroke-opacity",l).style("stroke",a)}return{restrict:"E",scope:!0,link:function(n,r,i){e(n,r,i,t)}}}]),radian.factory("plotLib",function(){"use strict";function e(e){return function(t){return t instanceof Array?t.map(e):e(t)}}function t(e){return function(t,n){var r=t instanceof Array,i=n instanceof Array;if(!r&&!i)return e(t,n);var s=r?t.length:0,o=i?n.length:0,u=r&&i?Math.min(s,o):Math.max(s,o),a=new Array(u),f;r&&i?f=function(r){return e(t[r],n[r])}:r?f=function(r){return e(t[r],n)}:f=function(r){return e(t,n[r])};for(var l=0;l<u;++l)a[l]=f(l);return a}}function n(e){return function(t,n){var r={},i=[];t.forEach(function(e,t){r[n[t]]?r[n[t]].push(e):(i.push(n[t]),r[n[t]]=[e])});var s=[];return i.forEach(function(t){s.push(e(r[t]))}),s}}function r(e,t,n){return d3.range(e,t,(t-e)/(n-1))}function i(e,t,n){return d3.range(e,t,n)}function s(e){var t=d3.mean(e),n=d3.mean(e,function(e){return e*e});return Math.sqrt(n-t*t)}function o(e){var t=[],n={};return e.forEach(function(e){n[e]||(t.push(e),n[e]=1)}),t}function u(e){var t=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-0.000005395239384953],n=1.000000000190015,r=e+5.5-(e+.5)*Math.log(e+5.5),i=n+sumArr(t.map(function(t,n){return t/(e+n+1)}));return-r+Math.log(2.5066282746310007*i/e)}function a(t,n,r){var i=1/(r*Math.sqrt(2*Math.PI)),s=2*r*r;return e(function(e){return i*Math.exp(-(e-n)*(e-n)/s)})(t)}function f(t,n,r){var i=1/(r*Math.sqrt(2*Math.PI)),s=2*r*r;return e(function(e){return e<=0?0:i/e*Math.exp(-(Math.log(e)-n)*(Math.log(e)-n)/s)})(t)}function l(t,n,r){var i=n*Math.log(r)+u(n);return e(function(e){return e<=0?0:Math.exp((n-1)*Math.log(e)-e/r-i)})(t)}function c(t,n,r){var i=n*Math.log(r)-u(n);return e(function(e){return e<=0?0:Math.exp(cval-r/e-(n+1)*Math.log(e))})(t)}return{E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:e(Math.abs),acos:e(Math.acos),asin:e(Math.asin),atan:e(Math.atan),ceil:e(Math.ceil),cos:e(Math.cos),exp:e(Math.exp),floor:e(Math.floor),log:e(Math.log),round:e(Math.round),sin:e(Math.sin),sqrt:e(Math.sqrt),tan:e(Math.tan),atan2:Math.atan2,pow:Math.pow,min:d3.min,max:d3.max,extent:d3.extent,sum:d3.sum,mean:d3.mean,median:d3.median,quantile:d3.quantile,zip:d3.zip,seq:r,seqStep:i,sdev:s,unique:o,minBy:n(d3.min),maxBy:n(d3.max),sumBy:n(d3.sum),meanBy:n(d3.mean),sdevBy:n(s),normal:a,lognormal:f,gamma:l,invgamma:c,rad$$neg:e(function(e){return-e}),rad$$add:t(function(e,t){return e+t}),rad$$sub:t(function(e,t){return e-t}),rad$$mul:t(function(e,t){return e*t}),rad$$div:t(function(e,t){return e/t}),rad$$pow:t(function(e,t){return Math.pow(e,t)})}}),radian.directive("radianUi",["$timeout",function(e){"use strict";return{restrict:"E",scope:!1,template:['<div class="radian-ui" ng-show="uivisible">','<span class="form-inline">','<span ng-show="xvs">',"<span>{{xlab}}</span>",'<select ng-model="xidx" class="span1" ','ng-options="v[0] as v[1] for v in xvs">',"</select>","</span>",'<span ng-show="xvs && yvs">',"&nbsp;&nbsp;vs&nbsp;&nbsp;","</span>",'<span ng-show="yvs">',"<span>{{ylab}}</span>",'<select ng-model="yidx" class="span1" ','ng-options="v[0] as v[1] for v in yvs">',"</select>","</span>",'<span ng-show="yvs && (swbut || swsel)">',"&nbsp;&nbsp;","</span>",'<span ng-show="swbut">',"<span>{{swbutlab}}</span>",'<button class="btn" data-toggle="button" ','ng-click="strokesel=1-strokesel">',"{{swbut}}","</button>","</span>",'<span ng-show="swsel">',"<label>{{swsellab}}&nbsp;</label>",'<select ng-model="strokesel" .span1 ','ng-options="o[0] as o[1] for o in swsel">',"</select>","</span>","</span>","</div>"].join(""),replace:!0,link:function(e,t,n){e.uivisible=!1;if(e.strokeSwitch!==undefined){e.uivisible=!0;var r=e.strokeSwitchLabel,i=e.strokeSwitch.split(";");i.length==1?(e.swbut=i[0],e.swbutlab=r):(e.swsel=i.map(function(e,t){return[t,e]}),e.swsellab=r)}if(e.selectX!==undefined){e.uivisible=!0;var s=e.selectX.split(",");s.length>1&&(e.xidx=0,e.xvs=s.map(function(e,t){return[t,e]}),e.xlab=e.selectXLabel,e.selectX==e.selectY&&e.$watch("xidx",function(t,n){t==e.yidx&&(e.yidx=n),e.yvs=[].concat(e.xvs),e.yvs.splice(t,1)}))}if(e.selectY!==undefined){e.uivisible=!0;var o=e.selectY.split(",");o.length>1&&(e.yidx=0,e.yvs=o.map(function(e,t){return[t,e]}),e.ylab=e.selectYLabel,e.selectX==e.selectY&&(e.yvs.splice(1),e.yidx=1))}}}}]),radian.factory("radianLegend",function(){return function(e,t){var n=t.switchable.length;if(n>1){var r=t.switchable,i=e.append("g").selectAll("g").data(r).enter().append("g"),s=i.append("circle").style("stroke-width",1).attr("r",5).attr("fill",function(e,t){return e.stroke.split(";")[0]||"#000"}).attr("stroke",function(e,t){return e.stroke.split(";")[0]||"#000"}),o=function(e,n){e.enabled=!e.enabled,d3.select(this).select("circle").attr("fill",e.enabled?e.stroke.split(";")[0]||"#000":"#f5f5f5"),t.$emit("paintChange")};i.on("click",o);var u=i.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8").text(function(e,t){return e.label||"data"+t}),a=[];u.each(function(e,t){a.push(d3.select(this).node().getComputedTextLength()+10)});var f=d3.max(a),l=15,c=f+l,h=n*f+(n-1)*l;i.attr("transform",function(e,n){return"translate("+(t.width-h+c*n)+",10)"})}}}),radian.factory("dft",function(){"use strict";return function(e,t){function n(e){t(e);for(var r=e.$$childHead;r;r=r.$$nextSibling)n(r)}n(e)}}),radian.factory("dftEsc",function(){"use strict";return function(e,t,n){function r(e,n){if(n&&!t(e))return;for(var i=e.$$childHead;i;i=i.$$nextSibling)r(i,!0)}r(e,n)}}),radian.factory("dumpScope",function(){"use strict";var e=function(t,n){var r="";for(var i=0;i<n;++i)r=r.concat(" ");console.log(r+t.$id+": "+Object.keys(t).filter(function(e){return e.charAt(0)!="$"&&e!="this"}));for(var s=t.$$childHead;s;s=s.$$nextSibling)e(s,n+2)};return function(t){e(t,0)}});