var radian=angular.module("radian",[]);radian.directive("plotData",["$rootScope","splitAttrs",function(e,t){"use strict";function n(e,n,i){function s(e,t,n){function r(e,i){e instanceof Array&&e.length>0?typeof e[0]=="string"&&i?e.forEach(function(t,r){e[r]=n(t)}):e.forEach(function(e){r(e,!1)}):typeof e=="object"&&Object.keys(e).forEach(function(n){r(e[n],n==t)})}r(e,!1)}n.hide(),t(e,i,r,!1,"plot-data");var o=e.plotOptions;if(!o.name)throw Error("<plot-data> must had NAME attribute");var u=o.name,a=o.format||"json",f=o.separator===""?" ":o.separator||",",l=o.cols;l&&(l=l.split(",").map(function(e){return e.trim()}));var c=["json","csv"];if(c.indexOf(a)==-1)throw Error('invalid FORMAT "'+a+'" in <plot-data>');if(a=="csv"&&!l)throw Error("CSV <plot-data> must have COLS");var h="";n.contents().each(function(e,t){t instanceof Text&&(h+=t.textContent)});var p,d=/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/;switch(a){case"json":try{p=JSON.parse(h)}catch(v){throw Error("invalid JSON data in <plot-data>")}break;case"csv":try{p=$.csv.toArrays(h.replace(/^\s*\n/g,"").split("\n").map(function(e){return e.replace(/^\s+/,"")}).join("\n"),{separator:f});if(p.length>0){if(p[0].length!=l.length)throw Error("mismatch between COLS and CSV data in <plot-data>");var m={},g=[];for(var y=0;y<l.length;++y)m[l[y]]=[],g.push(p[0][y].match(d));for(var b=0;b<p.length;++b)for(var y=0;y<l.length;++y)g[y]?m[l[y]].push(parseFloat(p[b][y])):m[l[y]].push(p[b][y]);p=m}}catch(v){throw Error("invalid CSV data in <plot-data>")}}if(e.$parent[u]&&e.$parent[u].metadata)for(var w in e.$parent[u].metadata){var E=e.$parent[u].metadata[w];if(E.format=="date")if(!E.dateParseFormat)s(p,w,function(e){return new Date(e)});else{var S;E.dateParseFormat=="isodate"?S=d3.time.format.iso.parse:S=d3.time.format(E.dateParseFormat).parse,s(p,w,function(e){return S(e)})}}var E=e.$parent[u]?e.$parent[u].metadata:null;e.$parent[u]=p,E&&(e.$parent[u].metadata=E)}var r={};return["cols","format","name","separator","src"].forEach(function(e){r[e]=1}),{restrict:"E",scope:!1,compile:function(e,t,r){return{post:n}}}}]),radian.directive("metadata",["$rootScope","splitAttrs",function(e,t){"use strict";var n={};return["dateFormat","dateParseFormat","errorFor","format","label","name","units"].forEach(function(e){n[e]=1}),{restrict:"E",scope:!1,link:function(e,r,i){if(!r[0].parentNode||r[0].parentNode.tagName!="PLOT-DATA"||!$(r[0].parentNode).attr("name"))throw Error("<metadata> not properly nested inside <plot-data>");var s=$(r[0].parentNode).attr("name");t(e,i,n,!1,"metadata");var o=e.plotOptions;delete e.plotOptions;if(!o.hasOwnProperty("name"))throw Error("<metadata> without NAME attribute");var u=o.name;delete o.name,e.$parent[s]||(e.$parent[s]={metadata:{}}),e.$parent[s].metadata||(e.$parent[s].metadata={}),e.$parent[s].metadata[u]=o}}}]),radian.directive("radianUi",[function(){"use strict";function e(e){var t=e.plotOptions;if(t.strokeSwitch!==undefined){var n=t.strokeSwitchLabel,r=t.strokeSwitch.split(";");r.length==1?(e.stroke=0,e.swbut=r[0],e.swbutlab=n,e.switchfn=function(){e.stroke=1-e.stroke,e.$emit("strokeSelChange",e.stroke)}):(e.stroke=r[0],e.swsel=r,e.swsellab=n,e.$watch("stroke",function(t,n){e.$emit("strokeSelChange",t)}))}if(t.selectX!==undefined){var i=t.selectX.split(",");i.length>1&&(e.xv=i[0],e.xvs=i,e.xlab=t.selectXLabel,e.$watch("xv",function(t,n){t==e.yv&&(e.yv=n),e.yvs=e.xvs.filter(function(t){return t!=e.xv}),e.$emit("xDataSelChange",e.xvs.indexOf(t))}))}if(t.selectY!==undefined){var s=t.selectY.split(",");s.length>1&&(e.yv=s[0],e.yvs=s,e.ylab=t.selectYLabel,e.allyvs=t.selectY.split(","),e.selectX==e.selectY&&(e.yvs=s.splice(1),e.yv=e.allyvs[1]),e.$watch("yv",function(t,n){e.$emit("yDataSelChange",e.allyvs.indexOf(t))}))}var o=0,u=0;e.xv&&(o=e.xvs.indexOf(e.xv)),e.yv&&(u=e.allyvs.indexOf(e.yv)),e.$emit("xDataSelChange",o),e.$emit("yDataSelChange",u)}return{restrict:"E",scope:!1,template:['<div class="radian-ui">','<span class="form-inline">','<span ng-show="xvs">',"<span>{{xlab}}</span>",'<select ng-model="xv" class="span1" ng-options="v for v in xvs">',"</select>","</span>",'<span ng-show="xvs && yvs">',"&nbsp;&nbsp;vs&nbsp;&nbsp;","</span>",'<span ng-show="yvs">',"<span>{{ylab}}</span>",'<select ng-model="yv" class="span1" ng-options="v for v in yvs">',"</select>","</span>",'<span ng-show="yvs && (swbut || swsel)">',"&nbsp;&nbsp;","</span>",'<span ng-show="swbut">',"<span>{{swbutlab}}</span>",'<button class="btn" data-toggle="button" ng-click="switchfn()">',"{{swbut}}","</button>","</span>",'<span ng-show="swsel">',"<label>{{swsellab}}&nbsp;</label>",'<select ng-model="stroke" .span1 ng-options="o for o in swsel">',"</select>","</span>","</span>","</div>"].join(""),replace:!0,link:function(t,n,r){t.$on("uiSetup",function(){e(t)})}}}]),radian.directive("plot",["evalPlotExpr","plotOption","splitAttrs","$timeout","$rootScope","dumpScope",function(e,t,n,r,i,s){"use strict";function o(e,t,r,i){n(e,r,c,!0,"plot"),e.strokesel=0;var s=300,o=1.618,u=o*s,a=r.width,f=r.height,l=r.aspect;a&&f&&l&&(l=null);if(f&&a)s=f,u=a,o=u/s;else if(f&&l)s=f,o=l,u=s*o;else if(a&&l)u=a,o=l,s=u/o;else if(f)s=f,u=s*o;else if(a)u=a,s=u/o;else if(l)o=l,s=u/o;else{var h=t.width(),p=t.height(),d=t.css("aspect")?parseFloat(t.css("aspect")):null;h&&p&&d&&(d=null),p&&h?(s=p,u=h,o=u/s):p&&d?(s=p,o=d,u=s*o):h&&d?(u=h,o=d,s=u/o):p?(s=p,u=s*o):h?(u=h,s=u/o):d&&(o=d,s=u/o)}e.width=u,e.height=s;var v=$(t.children()[0]).children()[1];d3.select(v).style("width",u).style("height",s),e.plots=[],e.views=[],e.switchable=[],e.addPlot=function(t,n){(n.plotOptions&&n.plotOptions.hasOwnProperty("legendSwitches")||e.plotOptions&&e.plotOptions.hasOwnProperty("legendSwitches"))&&e.switchable.push(e.plots.length),e.plots.push({xidx:0,yidx:0,draw:t,scope:n,enabled:!0})},i(e.$new(),function(e){t.children().append(e)})}function u(e,n){function i(){e.views.forEach(function(t){l(t,e.plots)})}function s(){e.views=h.map(function(t){return f(e,t)})}var o=e.plotOptions,u=d3.select($(n.children()[0]).children()[1]),c=u.append("g").attr("width",e.width).attr("height",e.height),h=[c],p=null;if(o.hasOwnProperty("zoomX")){var d=t(e,"zoom-fraction",.2);d=Math.min(.95,Math.max(.05,d));var v=e.height*d,m=e.height*(1-d),g=u.append("g").attr("transform","translate(0,"+m+")").attr("width",e.width).attr("height",e.height*d);h.push(g),h[0].attr("height",e.height*(1-d)),p=function(){u.append("defs").append("clipPath").attr("id","xzoomclip").append("rect").attr("width",e.views[0].realwidth).attr("height",e.views[0].realheight),e.views[0].clip="xzoomclip";var t=d3.svg.brush().x(e.views[1].x);t.on("brush",function(){e.views[0].x.domain(t.empty()?e.views[1].x.domain():t.extent()),l(e.views[0],e.plots,e.ui)}),e.views[1].post=function(n){n.append("g").attr("class","x brush").call(t).selectAll("rect").attr("y",-6).attr("height",e.views[1].realheight+7)}}}r(function(){s(),p&&p(),i(),a(u,e),e.$on("paintChange",function(e){i()}),e.$on("dataChange",function(e,t){s(),p&&p(),i()}),e.$on("strokeSelChange",function(t,n){e.strokesel=n,i()}),e.$on("xDataSelChange",function(t,n){e.plots.forEach(function(e){e.scope.x&&e.scope.x[0]instanceof Array&&(e.xidx=n%e.scope.x.length)}),s(),p&&p(),i()}),e.$on("yDataSelChange",function(t,n){e.plots.forEach(function(e){e.scope.y&&e.scope.y[0]instanceof Array&&(e.yidx=n%e.scope.y.length)}),s(),p&&p(),i()}),e.$broadcast("uiSetup")},0)}function a(e,t){var n=t.switchable.length;if(n>0){var r=t.plots.filter(function(e,n){return t.switchable.indexOf(n)!=-1}),i=e.append("g").selectAll("g").data(r).enter().append("g"),s=i.append("circle").style("stroke-width",1).attr("r",5).attr("fill",function(e,t){return e.scope.plotOptions.stroke.split(";")[0]||"#000"}).attr("stroke",function(e,t){return e.scope.plotOptions.stroke.split(";")[0]||"#000"}),o=function(e,n){e.enabled=!e.enabled,d3.select(this).select("circle").attr("fill",e.enabled?e.scope.plotOptions.stroke.split(";")[0]||"#000":"#fff"),t.views.forEach(function(e){l(e,t.plots,t.ui)})};i.on("click",o);var u=i.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8").text(function(e,t){return e.scope.plotOptions.label||"data"+t}),a=[];u.each(function(e,t){a.push(d3.select(this).node().getComputedTextLength()+10)});var f=d3.max(a),c=15,h=f+c,p=n*f+(n-1)*c;i.attr("transform",function(e,n){return"translate("+(t.width-p+h*n)+",10)"})}}function f(e,t){function n(e){return e[0]instanceof Array?d3.merge(e.map(function(e){return d3.extent(e)})):d3.extent(e)}var r={svg:t},i=e.plotOptions;r.xaxis=!i.axisX||i.axisX!="off",r.yaxis=!i.axisY||i.axisX!="off";var s=!i.axisXLabel||i.axisXLabel!="off",o=!i.axisYLabel||i.axisYLabel!="off",u=i.axisXLabel,a=i.axisYLabel;r.margin={top:i.topMargin||2,right:i.rightMargin||10,bottom:i.bottomMargin||2,left:i.leftMargin||2},r.xaxis&&(r.margin.bottom+=20+(s?15:0)),r.yaxis&&(r.margin.left+=30+(o?22:0)),r.realwidth=r.svg.attr("width")-r.margin.left-r.margin.right,r.realheight=r.svg.attr("height")-r.margin.top-r.margin.bottom,r.outw=r.realwidth+r.margin.left+r.margin.right,r.outh=r.realheight+r.margin.top+r.margin.bottom;var f=e.plots,l=d3.extent(d3.merge(f.filter(function(e){return e.enabled}).map(function(e){return n(e.scope.x)}))),c=d3.extent(d3.merge(f.filter(function(e){return e.enabled}).map(function(e){return n(e.scope.y)}))),h=f.some(function(e){return e.scope.x.metadata&&e.scope.x.metadata.format=="date"});h?r.x=d3.time.scale().range([0,r.realwidth]).domain(l):r.x=d3.scale.linear().range([0,r.realwidth]).domain(l),r.y=d3.scale.linear().range([r.realheight,0]).domain(c);if(s){if(!u){for(var p=0;p<f.length;++p){var d=f[p].scope.x;if(d.metadata&&d.metadata.label){u=d.metadata.label,d.metadata.units&&(u+=" ("+d.metadata.units+")");break}}if(!u&&i.selectX){var v=i.selectX.split(",");u=v[f[0].xidx]}u||(u="X Axis")}r.xlabel=u}if(o){if(!a){for(var p=0;p<f.length;++p){var m=f[p].scope.y;if(m.metadata&&m.metadata.label){a=m.metadata.label,m.metadata.units&&(a+=" ("+m.metadata.units+")");break}}if(!a&&i.selectY){var v=i.selectY.split(",");a=v[f[0].yidx]}a||(a="Y Axis")}r.ylabel=a}return r}function l(e,t,n){e.svg.selectAll("g").remove();var r=e.svg.append("g").attr("width",e.outw).attr("height",e.outh),i=r.append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")");e.clip&&i.attr("clip-path","url(#"+e.clip+")");if(e.xaxis){var s=d3.svg.axis().scale(e.x).orient("bottom").ticks(r.attr("width")/100);t[0].scope.x.metadata&&t[0].scope.x.metadata.format=="date"&&s.tickFormat(d3.time.format(t[0].scope.x.metadata.dateFormat||"%Y-%m-%d")),r.append("g").attr("class","axis").attr("transform","translate("+e.margin.left+","+(+e.realheight+4)+")").call(s),e.xlabel&&r.append("g").attr("class","axis-label").attr("transform","translate("+(+e.margin.left+e.realwidth/2)+","+e.realheight+")").append("text").attr("x",0).attr("y",35).attr("text-anchor","middle").text(e.xlabel)}if(e.yaxis){var s=d3.svg.axis().scale(e.y).orient("left").ticks(r.attr("height")/36),o=r.append("g").attr("class","axis");o=o.attr("transform","translate("+(+e.margin.left-4)+",0)"),o.call(s);if(e.ylabel){var u=12,a=e.realheight/2;r.append("g").attr("class","axis-label").append("text").attr("x",u).attr("y",a).attr("transform","rotate(-90,"+u+","+a+")").attr("text-anchor","middle").text(e.ylabel)}}t.forEach(function(t){if(t.enabled){var n=i.append("g"),r=t.scope.x[0]instanceof Array?t.scope.x[t.xidx]:t.scope.x,s=t.scope.y[0]instanceof Array?t.scope.y[t.yidx]:t.scope.y;t.draw(n,r,e.x,s,e.y,t.scope)}}),e.post&&e.post(i)}var c={};return["aspect","axisX","axisXLabel","axisX2","axisY","axisYLabel","axisY2","fill","fillOpacity","height","id","label","legendSwitches","marker","markerSize","range","rangeX","rangeY","selectX","selectY","stroke","strokeOpacity","strokeSwitch","strokeWidth","title","width","zoom2d","zoomX","zoomY"].forEach(function(e){c[e]=1}),{restrict:"E",template:['<div class="radian">',"<radian-ui></radian-ui>","<svg></svg>","</div>"].join(""),transclude:!0,scope:!0,compile:function(e,t,n){return{pre:function(e,t,r){o(e,t,r,n)},post:u}}}}]),radian.directive("lines",["getStyle","splitAttrs","evalPlotExpr","$rootScope","dumpScope",function(e,t,n,r,i){"use strict";function s(t,n,r,i,s,o){var u=e("strokeWidth",o,1),a=e("strokeOpacity",o,1),f=e("stroke",o,"#000").split(";"),l;f.length==1||!o.strokesel?l=f[0]:isNaN(parseInt(o.strokesel))?l=f[Math.max(0,o.swsel.indexOf(o.strokesel))%f.length]:l=f[o.strokesel%f.length];if(l.indexOf(":")==-1){var c=d3.svg.line().x(function(e){return r(e[0])}).y(function(e){return s(e[1])});t.append("path").datum(d3.zip(n,i)).attr("class","line").attr("d",c).style("fill","none").style("stroke-width",u).style("stroke-opacity",a).style("stroke",l)}else{var h=l.split(":"),o=function(e){return 1-Math.exp(-20*e/(3*n.length))},p=d3.interpolateHsl(h[0],h[1]),d=d3.zip(n,i),v=d3.zip(d,d.slice(1));t.selectAll("path").data(v).enter().append("path").attr("class","line").style("stroke-width",u).style("stroke-opacity",a).style("stroke",function(e,t){return p(o(t))}).attr("d",d3.svg.line().x(function(e){return r(e[0])}).y(function(e){return s(e[1])}))}}var o=["fill","fillOpacity","label","legendSwitches","marker","markerSize","selectX","selectY","stroke","strokeOpacity","strokeWidth"],u={};return o.forEach(function(e){u[e]=1}),{restrict:"E",scope:!0,link:function(e,r,i){t(e,i,u,!0,"lines"),r.hide(),e.$parent.addPlot(s,e),i.$observe("x",function(t){e.x=n(e,t),e.$emit("dataChange")}),i.$observe("y",function(t){e.y=n(e,t),e.$emit("dataChange")}),i.$observe("stroke",function(){e.$emit("paintChange")})}}}]),radian.factory("dumpScope",function(){"use strict";var e=function(t,n){var r="";for(var i=0;i<n;++i)r=r.concat(" ");console.log(r+t.$id+": "+Object.keys(t).filter(function(e){return e.charAt(0)!="$"&&e!="this"}));for(var s=t.$$childHead;s;s=s.$$nextSibling)e(s,n+2)};return function(t){e(t,0)}}),radian.factory("evalPlotExpr",["$rootScope","plotLib","parseExpr",function($rootScope,plotLib,parseExpr){return function(scope,expr){console.log("eval: "+expr);var ast;try{ast=parseExpr(expr)}catch(e){return expr}var metadatakey=null,dataset=null;estraverse.traverse(ast,{enter:function(e){if(e.type!="PluckExpression"&&e.type!="MemberExpression")return estraverse.VisitorOption.Skip;if(e.property.type=="Identifier"){metadatakey=e.property.name;var t=e.object;while(t.type!="Identifier")t=t.object;return dataset=t.name,estraverse.VisitorOption.Break}}}),estraverse.traverse(ast,{leave:function(e){delete e.start,delete e.end}}),console.log("      ast = "+JSON.stringify(ast));var astrepl=estraverse.replace(ast,{leave:function(e){if(e.type=="BinaryExpression"){var t="";switch(e.operator){case"+":t="rad$$add";break;case"-":t="rad$$sub";break;case"*":t="rad$$mul";break;case"/":t="rad$$div";break;case"**":t="rad$$pow"}return t?{type:"CallExpression",callee:{type:"Identifier",name:t},arguments:[e.left,e.right]}:e}return e.type=="UnaryExpression"&&e.operator=="-"?{type:"CallExpression",callee:{type:"Identifier",name:"rad$$neg"},arguments:[e.argument]}:e}});astrepl=estraverse.replace(astrepl,{enter:function(e){return e.type=="CallExpression"&&e.callee.type=="PluckExpression"?{type:"CallExpression",callee:{type:"MemberExpression",object:e.callee.object,property:{type:"Identifier",name:"map"},computed:!1},arguments:[{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"$$x"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"$$x"},property:e.callee.property,computed:!1},arguments:e.arguments}}]}}]}:e},leave:function(e){if(e.type=="PluckExpression")return{type:"CallExpression",callee:{type:"MemberExpression",object:e.object,property:{type:"Identifier",name:"map"},computed:!1},arguments:[{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"$$x"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"MemberExpression",object:{type:"Identifier",name:"$$x"},property:e.property,computed:!1}}]}}]}}}),console.log("  astrepl = "+JSON.stringify(astrepl));var exc={Math:1,Date:1,Object:1},excstack=[];Object.keys(plotLib).forEach(function(e){exc[e]=1}),astrepl=estraverse.replace(astrepl,{enter:function(e,t){switch(e.type){case"FunctionExpression":excstack.push(e.params.map(function(e){return e.name})),e.params.forEach(function(e){exc[e.name]?++exc[e.name]:exc[e.name]=1});break;case"Identifier":if(!exc[e.name])if(!t||(t.type!="MemberExpression"&&t.type!="PluckExpression"||e!=t.property)&&(t.type!="CallExpression"||e!=t.callee))return parseExpr("scope.$eval('"+e.name+"')")}return e},leave:function(e){return e.type=="FunctionExpression"&&excstack.pop().forEach(function(e){--exc[e]==0&&delete exc[e]}),e}});var access=escodegen.generate(astrepl);console.log("  access = "+access),console.log("");var ret=[];try{with(plotLib)eval("ret = "+access)}catch(e){console.log("evalPlotExpr failed on '"+expr+"' -- "+e.message)}return dataset&&metadatakey&&$rootScope[dataset]&&$rootScope[dataset].metadata&&$rootScope[dataset].metadata[metadatakey]&&(ret.metadata=$rootScope[dataset].metadata[metadatakey]),ret}}]),radian.factory("getStyle",function(){"use strict";return function(e,t,n){var r=t;if(r.plotOptions&&r.plotOptions[e])return r.plotOptions[e];while(r.$parent){r=r.$parent;if(r.plotOptions&&r.plotOptions[e])return r.plotOptions[e]}return n}}),radian.factory("splitAttrs",["evalPlotExpr","$timeout",function(e,t){"use strict";var n=["aspect","axisX","axisXLabel","axisX2","axisY","axisYLabel","axisY2","banded","clipX","clipY","cols","dateFormat","dateParseFormat","errorFor","fill","fillOpacity","format","height","id","interp","label","legendSwitches","marker","markerSize","name","range","rangeX","rangeY","rows","selectX","selectY","separator","src","stroke","strokeOpacity","strokeSwitch","strokeWidth","tabs","title","type","units","width","zoom2d","zoomX","zoomY"],r={};return n.forEach(function(e){r[e]=1}),function(n,i,s,o,u){n.plotOptions={},Object.keys(i).forEach(function(a){if(s.hasOwnProperty(a))n.plotOptions[a]=i[a];else{if(r.hasOwnProperty(a))throw Error("invalid attribute in <"+u+"> directive: "+a);if(a.charAt(0)!="$"){if(!o)throw Error("extra variable attributes not allowed in <"+u+">");t(function(){n[a]=e(n,i[a])},0)}}})}}]),radian.factory("plotOption",function(){"use strict";return function(e,t,n){while(e){if(e.plotOptions&&e.plotOptions[t])return e.plotOptions[t];e=e.$parent}return n}}),radian.factory("plotLib",function(){"use strict";function e(e){return function(t){return t instanceof Array?t.map(e):e(t)}}function t(e){return function(t,n){var r=t instanceof Array,i=n instanceof Array;if(!r&&!i)return e(t,n);var s=r?t.length:0,o=i?n.length:0,u=r&&i?Math.min(s,o):Math.max(s,o),a=new Array(u),f;r&&i?f=function(r){return e(t[r],n[r])}:r?f=function(r){return e(t[r],n)}:f=function(r){return e(t,n[r])};for(var l=0;l<u;++l)a[l]=f(l);return a}}function n(e){return function(t,n){var r={},i=[];t.forEach(function(e,t){r[n[t]]?r[n[t]].push(e):(i.push(n[t]),r[n[t]]=[e])});var s=[];return i.forEach(function(t){s.push(e(r[t]))}),s}}function r(e,t,n){return d3.range(e,t,(t-e)/(n-1))}function i(e,t,n){return d3.range(e,t,n)}function s(e){var t=d3.mean(e),n=d3.mean(e,function(e){return e*e});return Math.sqrt(n-t*t)}function o(e){var t=[],n={};return e.forEach(function(e){n[e]||(t.push(e),n[e]=1)}),t}function u(e){var t=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-0.000005395239384953],n=1.000000000190015,r=e+5.5-(e+.5)*Math.log(e+5.5),i=n+sumArr(t.map(function(t,n){return t/(e+n+1)}));return-r+Math.log(2.5066282746310007*i/e)}function a(t,n,r){var i=1/(r*Math.sqrt(2*Math.PI)),s=2*r*r;return e(function(e){return i*Math.exp(-(e-n)*(e-n)/s)})(t)}function f(t,n,r){var i=1/(r*Math.sqrt(2*Math.PI)),s=2*r*r;return e(function(e){return e<=0?0:i/e*Math.exp(-(Math.log(e)-n)*(Math.log(e)-n)/s)})(t)}function l(t,n,r){var i=n*Math.log(r)+u(n);return e(function(e){return e<=0?0:Math.exp((n-1)*Math.log(e)-e/r-i)})(t)}function c(t,n,r){var i=n*Math.log(r)-u(n);return e(function(e){return e<=0?0:Math.exp(cval-r/e-(n+1)*Math.log(e))})(t)}return{E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:e(Math.abs),acos:e(Math.acos),asin:e(Math.asin),atan:e(Math.atan),ceil:e(Math.ceil),cos:e(Math.cos),exp:e(Math.exp),floor:e(Math.floor),log:e(Math.log),round:e(Math.round),sin:e(Math.sin),sqrt:e(Math.sqrt),tan:e(Math.tan),atan2:Math.atan2,pow:Math.pow,min:d3.min,max:d3.max,extent:d3.extent,sum:d3.sum,mean:d3.mean,median:d3.median,quantile:d3.quantile,zip:d3.zip,seq:r,seqStep:i,sdev:s,unique:o,minBy:n(d3.min),maxBy:n(d3.max),sumBy:n(d3.sum),meanBy:n(d3.mean),sdevBy:n(s),normal:a,lognormal:f,gamma:l,invgamma:c,rad$$neg:e(function(e){return-e}),rad$$add:t(function(e,t){return e+t}),rad$$sub:t(function(e,t){return e-t}),rad$$mul:t(function(e,t){return e*t}),rad$$div:t(function(e,t){return e/t}),rad$$pow:t(function(e,t){return Math.pow(e,t)})}}),radian.factory("parseExpr",function(){"use strict";function e(e,t){function n(e){return b(e),r.start=mt,r.end=gt,r.type=yt,r.value=bt,r}ct=String(e),ht=ct.length,s();var r={};return n.jumpTo=function(e,t){vt=e;var n=ct.charAt(e-1);wt=t,f()},n}function t(e,t){var n=dt(ct,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=vt,r}function n(e){function t(e){if(e.length==1)return n+="return str === "+JSON.stringify(e[0])+";";n+="switch(str){";for(var t=0;t<e.length;++t)n+="case "+JSON.stringify(e[t])+":";n+="return true}return false;"}e=e.split(" ");var n="",r=[];e:for(var i=0;i<e.length;++i){for(var s=0;s<r.length;++s)if(r[s][0].length==e[i].length){r[s].push(e[i]);continue e}r.push([e[i]])}if(r.length>3){r.sort(function(e,t){return t.length-e.length}),n+="switch(str.length){";for(var i=0;i<r.length;++i){var o=r[i];n+="case "+o[0].length+":",t(o)}n+="}"}else t(e);return new Function("str",n)}function r(e){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e>=170&&Un.test(String.fromCharCode(e))}function i(e){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e>=170&&zn.test(String.fromCharCode(e))}function s(){vt=0,wt=!0,f()}function o(e,t){gt=vt,yt=e,f(),bt=t,wt=e.beforeExpr}function u(){var e=ct.indexOf("*/",vt+=2);e===-1&&t(vt-2,"Unterminated comment"),vt=e+2}function a(){var e=ct.charCodeAt(vt+=2);while(vt<ht&&e!==10&&e!==13&&e!==8232&&e!==8329)++vt,e=ct.charCodeAt(vt)}function f(){while(vt<ht){var e=ct.charCodeAt(vt);if(e===32)++vt;else if(e===13){++vt;var t=ct.charCodeAt(vt);t===10&&++vt}else if(e===10)++vt;else if(e<14&&e>8)++vt;else if(e===47){var t=ct.charCodeAt(vt+1);if(t===42)u();else{if(t!==47)break;a()}}else if(e<14&&e>8||e===32||e===160)++vt;else{if(!(e>=5760&&In.test(String.fromCharCode(e))))break;++vt}}}function l(){var e=ct.charCodeAt(vt+1);return e>=48&&e<=57?T(!0):(++vt,o(dn))}function c(){var e=ct.charCodeAt(vt+1);return wt?(++vt,E()):e===61?w(bn,2):w(gn,1)}function h(){var e=ct.charCodeAt(vt+1);if(e===61)return w(bn,2);if(e===42){var t=ct.charCodeAt(vt+2);return e===61?w(bn,3):w(_n,2)}return w(Mn,1)}function p(e){var t=ct.charCodeAt(vt+1);return t===e?w(e===124?xn:Tn,2):t===61?w(bn,2):w(e===124?Nn:kn,1)}function d(){var e=ct.charCodeAt(vt+1);return e===61?w(bn,2):w(Cn,1)}function v(e){var t=ct.charCodeAt(vt+1);return t===e?w(En,2):t===61?w(bn,2):w(wn,1)}function m(e){var t=ct.charCodeAt(vt+1),n=1;return t===e?(n=e===62&&ct.charCodeAt(vt+2)===62?3:2,ct.charCodeAt(vt+n)===61?w(bn,n+1):w(On,n)):(t===61&&(n=ct.charCodeAt(vt+2)===61?3:2),w(An,n))}function g(e){var t=ct.charCodeAt(vt+1);return t===61?w(Ln,ct.charCodeAt(vt+2)===61?3:2):w(e===61?yn:Sn,1)}function y(e){switch(e){case 46:return l();case 35:return++vt,o(mn);case 40:return++vt,o(fn);case 41:return++vt,o(ln);case 59:return++vt,o(hn);case 44:return++vt,o(cn);case 91:return++vt,o(sn);case 93:return++vt,o(on);case 123:return++vt,o(un);case 125:return++vt,o(an);case 58:return++vt,o(pn);case 63:return++vt,o(vn);case 48:var t=ct.charCodeAt(vt+1);if(t===120||t===88)return x();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return T(!1);case 34:case 39:return N(e);case 47:return c(e);case 37:case 42:return h();case 124:case 38:return p(e);case 94:return d();case 43:case 45:return v(e);case 60:case 62:return m(e);case 61:case 33:return g(e);case 126:return w(Sn,1)}return!1}function b(e){mt=vt;if(e)return E();if(vt>=ht)return o(Mt);var n=ct.charCodeAt(vt);if(r(n)||n===92)return L();var i=y(n);if(i===!1){var s=String.fromCharCode(n);if(s==="\\"||Un.test(s))return L();t(vt,"Unexpected character '"+s+"'")}return i}function w(e,t){var n=ct.slice(vt,vt+t);vt+=t,o(e,n)}function E(){var e="",n,r,i=vt;for(;;){vt>=ht&&t(i,"Unterminated regular expression");var s=ct.charAt(vt);Wn.test(s)&&t(i,"Unterminated regular expression");if(!n){if(s==="[")r=!0;else if(s==="]"&&r)r=!1;else if(s==="/"&&!r)break;n=s==="\\"}else n=!1;++vt}var e=ct.slice(i,vt);++vt;var u=k();return u&&!/^[gmsiy]*$/.test(u)&&t(i,"Invalid regexp flag"),o(Lt,new RegExp(e,u))}function S(e,t){var n=vt,r=0;for(var i=0,s=t==null?Infinity:t;i<s;++i){var o=ct.charCodeAt(vt),u;o>=97?u=o-97+10:o>=65?u=o-65+10:o>=48&&o<=57?u=o-48:u=Infinity;if(u>=e)break;++vt,r=r*e+u}return vt===n||t!=null&&vt-n!==t?null:r}function x(){vt+=2;var e=S(16);return e==null&&t(mt+2,"Expected hexadecimal number"),r(ct.charCodeAt(vt))&&t(vt,"Identifier directly after number"),o(kt,e)}function T(e){var n=vt,i=!1,s=ct.charCodeAt(vt)===48;!e&&S(10)===null&&t(n,"Invalid number"),ct.charCodeAt(vt)===46&&(++vt,S(10),i=!0);var u=ct.charCodeAt(vt);if(u===69||u===101)u=ct.charCodeAt(++vt),(u===43||u===45)&&++vt,S(10)===null&&t(n,"Invalid number"),i=!0;r(ct.charCodeAt(vt))&&t(vt,"Identifier directly after number");var a=ct.slice(n,vt),f;return i?f=parseFloat(a):!s||a.length===1?f=parseInt(a,10):/[89]/.test(a)||Ct?t(n,"Invalid number"):f=parseInt(a,8),o(kt,f)}function N(e){vt++,Vn.length=0;for(;;){vt>=ht&&t(mt,"Unterminated string constant");var n=ct.charCodeAt(vt);if(n===e)return++vt,o(At,String.fromCharCode.apply(null,Vn));if(n===92){n=ct.charCodeAt(++vt);var r=/^[0-7]+/.exec(ct.slice(vt,vt+3));r&&(r=r[0]);while(r&&parseInt(r,8)>255)r=r.slice(0,r.length-1);r==="0"&&(r=null),++vt;if(r)Ct&&t(vt-2,"Octal literal in strict mode"),Vn.push(parseInt(r,8)),vt+=r.length-1;else switch(n){case 110:Vn.push(10);break;case 114:Vn.push(13);break;case 120:Vn.push(C(2));break;case 117:Vn.push(C(4));break;case 85:Vn.push(C(8));break;case 116:Vn.push(9);break;case 98:Vn.push(8);break;case 118:Vn.push(11);break;case 102:Vn.push(12);break;case 48:Vn.push(0);break;case 13:ct.charCodeAt(vt)===10&&++vt;case 10:break;default:Vn.push(n)}}else(n===13||n===10||n===8232||n===8329)&&t(mt,"Unterminated string constant"),Vn.push(n),++vt}}function C(e){var n=S(16,e);return n===null&&t(mt,"Bad character escape sequence"),n}function k(){$n=!1;var e,n=!0,s=vt;for(;;){var o=ct.charCodeAt(vt);if(i(o))$n&&(e+=ct.charAt(vt)),++vt;else{if(o!==92)break;$n||(e=ct.slice(s,vt)),$n=!0,ct.charCodeAt(++vt)!=117&&t(vt,"Expecting Unicode escape sequence \\uXXXX"),++vt;var u=C(4),a=String.fromCharCode(u);a||t(vt-1,"Invalid Unicode escape"),(n?!r(u):!i(u))&&t(vt-4,"Invalid Unicode escape"),e+=a}n=!1}return $n?e:ct.slice(s,vt)}function L(){var e=k(),n=Ot;return $n||(Fn(e)?n=rn[e]:Ct&&Bn(e)&&t(mt,"The keyword '"+e+"' is reserved")),o(n,e)}function A(){Et=mt,St=gt,b()}function O(e){Ct=e,vt=St,f(),b()}function M(){this.type=null,this.start=mt,this.end=null}function _(){this.start=tokStartLoc,this.end=null}function D(){return new M}function P(e){var t=new M;return t.start=e.start,t}function H(e,t){return e.type=t,e.end=St,e}function B(e){return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&e.expression.value==="use strict"}function j(e){if(yt===e)return A(),!0}function F(){return yt===Mt||yt===an||Wn.test(ct.slice(St,mt))}function I(){!j(hn)&&!F()&&R()}function q(e){yt===e?A():R()}function R(){t(mt,"Unexpected token")}function U(e){e.type!=="Identifier"&&e.type!=="MemberExpression"&&t(e.start,"Assigning to rvalue"),Ct&&e.type==="Identifier"&&jn(e.name)&&t(e.start,"Assigning to "+e.name+" in strict mode")}function z(){return Et=St=vt,Tt=Ct=null,Nt=[],b(),Q()}function W(){yt===gn&&b(!0);var e=yt,n=D();switch(e){case _t:case Ht:A();var r=e===_t;j(hn)||F()?n.label=null:yt!==Ot?R():(n.label=lt(),I());for(var i=0;i<Nt.length;++i){var s=Nt[i];if(n.label==null||s.name===n.label.name){if(!(s.kind==null||!r&&s.kind!=="loop"))break;if(n.label&&r)break}}return i===Nt.length&&t(n.start,"Unsyntactic "+e.keyword),H(n,r?"BreakStatement":"ContinueStatement");case Bt:return A(),I(),H(n,"DebuggerStatement");case Ft:return A(),Nt.push(Jn),n.body=W(),Nt.pop(),q(Kt),n.test=X(),I(),H(n,"DoWhileStatement");case Rt:A(),Nt.push(Jn),q(fn);if(yt===hn)return $(n,null);if(yt===Jt){var o=D();return A(),K(o,!0),o.declarations.length===1&&j(nn)?J(n,o):$(n,o)}var o=Q(!1,!0);if(j(nn))return U(o),J(n,o);return $(n,o);case Ut:return A(),at(n,!0);case zt:return A(),n.test=X(),n.consequent=W(),n.alternate=j(It)?W():null,H(n,"IfStatement");case Wt:return Tt||t(mt,"'return' outside of function"),A(),j(hn)||F()?n.argument=null:(n.argument=Q(),I()),H(n,"ReturnStatement");case Xt:A(),n.discriminant=X(),n.cases=[],q(un),Nt.push(Kn);for(var u,a;yt!=an;)if(yt===Dt||yt===jt){var f=yt===Dt;u&&H(u,"SwitchCase"),n.cases.push(u=D()),u.consequent=[],A(),f?u.test=Q():(a&&t(Et,"Multiple default clauses"),a=!0,u.test=null),q(pn)}else u||R(),u.consequent.push(W());return u&&H(u,"SwitchCase"),A(),Nt.pop(),H(n,"SwitchStatement");case Vt:return A(),Wn.test(ct.slice(St,mt))&&t(St,"Illegal newline after throw"),n.argument=Q(),I(),H(n,"ThrowStatement");case $t:A(),n.block=V(),n.handlers=[];while(yt===Pt){var l=D();A(),q(fn),l.param=lt(),Ct&&jn(l.param.name)&&t(l.param.start,"Binding "+l.param.name+" in strict mode"),q(ln),l.guard=null,l.body=V(),n.handlers.push(H(l,"CatchClause"))}return n.finalizer=j(qt)?V():null,!n.handlers.length&&!n.finalizer&&t(n.start,"Missing catch or finally clause"),H(n,"TryStatement");case Jt:return A(),n=K(n),I(),n;case Kt:return A(),n.test=X(),Nt.push(Jn),n.body=W(),Nt.pop(),H(n,"WhileStatement");case Qt:return Ct&&t(mt,"'with' in strict mode"),A(),n.object=X(),n.body=W(),H(n,"WithStatement");case un:return V();case hn:return A(),H(n,"EmptyStatement");default:var c=bt,h=Q();if(e===Ot&&h.type==="Identifier"&&j(pn)){for(var i=0;i<Nt.length;++i)Nt[i].name===c&&t(h.start,"Label '"+c+"' is already declared");var p=yt.isLoop?"loop":yt===Xt?"switch":null;return Nt.push({name:c,kind:p}),n.body=W(),Nt.pop(),n.label=h,H(n,"LabeledStatement")}return n.expression=h,I(),H(n,"ExpressionStatement")}}function X(){q(fn);var e=Q();return q(ln),e}function V(e){var t=D(),n=!0,r=!1,i;t.body=[],q(un);while(!j(an)){var s=W();t.body.push(s),n&&B(s)&&(i=r,O(r=!0)),n=!1}return r&&!i&&O(!1),H(t,"BlockStatement")}function $(e,t){return e.init=t,q(hn),e.test=yt===hn?null:Q(),q(hn),e.update=yt===ln?null:Q(),q(ln),e.body=W(),Nt.pop(),H(e,"ForStatement")}function J(e,t){return e.left=t,e.right=Q(),q(ln),e.body=W(),Nt.pop(),H(e,"ForInStatement")}function K(e,n){e.declarations=[],e.kind="var";for(;;){var r=D();r.id=lt(),Ct&&jn(r.id.name)&&t(r.id.start,"Binding "+r.id.name+" in strict mode"),r.init=j(yn)?Q(!0,n):null,e.declarations.push(H(r,"VariableDeclarator"));if(!j(cn))break}return H(e,"VariableDeclaration")}function Q(e,t){var n=G(t);if(!e&&yt===cn){var r=P(n);r.expressions=[n];while(j(cn))r.expressions.push(G(t));return H(r,"SequenceExpression")}return n}function G(e){var t=Y(e);if(yt.isAssign){var n=P(t);return n.operator=bt,n.left=t,A(),n.right=G(e),U(t),H(n,"AssignmentExpression")}return t}function Y(e){var t=Z(e);if(j(vn)){var n=P(t);return n.test=t,n.consequent=Q(!0),q(pn),n.alternate=Q(!0,e),H(n,"ConditionalExpression")}return t}function Z(e){return et(tt(e),-1,e)}function et(e,t,n){var r=yt.binop;if(r!=null&&(!n||yt!==nn)&&r>t){var i=P(e);i.left=e,i.operator=bt,A(),i.right=et(tt(n),r,n);var i=H(i,/&&|\|\|/.test(i.operator)?"LogicalExpression":"BinaryExpression");return et(i,t,n)}return e}function tt(e){if(yt.prefix){var n=D(),r=yt.isUpdate;return n.operator=bt,n.prefix=!0,A(),n.argument=tt(e),r?U(n.argument):Ct&&n.operator==="delete"&&n.argument.type==="Identifier"&&t(n.start,"Deleting local variable in strict mode"),H(n,r?"UpdateExpression":"UnaryExpression")}var i=nt();while(yt.postfix&&!F()){var n=P(i);n.operator=bt,n.prefix=!1,n.argument=i,U(i),A(),i=H(n,"UpdateExpression")}return i}function nt(){return rt(it())}function rt(e,t){if(j(dn)){var n=P(e);return n.object=e,n.property=lt(!0),n.computed=!1,rt(H(n,"MemberExpression"),t)}if(j(mn)){var n=P(e);return n.object=e,n.property=lt(!0),n.computed=!1,rt(H(n,"PluckExpression"),t)}if(j(sn)){var n=P(e);return n.object=e,n.property=Q(),n.computed=!0
,q(on),rt(H(n,"MemberExpression"),t)}if(!t&&j(fn)){var n=P(e);return n.callee=e,n.arguments=ft(ln),rt(H(n,"CallExpression"),t)}return e}function it(){switch(yt){case Yt:var e=D();return A(),H(e,"ThisExpression");case Ot:return lt();case kt:case At:case Lt:var e=D();return e.value=bt,e.raw=ct.slice(mt,gt),A(),H(e,"Literal");case Zt:case en:case tn:var e=D();return e.value=yt.atomValue,e.raw=yt.keyword,A(),H(e,"Literal");case fn:var t=tokStartLoc,n=mt;A();var r=Q();return r.start=n,r.end=gt,q(ln),r;case sn:var e=D();return A(),e.elements=ft(on,!0),H(e,"ArrayExpression");case un:return ot();case Ut:var e=D();return A(),at(e,!1);case Gt:return st();default:R()}}function st(){var e=D();return A(),e.callee=rt(it(),!0),j(fn)?e.arguments=ft(ln):e.arguments=[],H(e,"NewExpression")}function ot(){var e=D(),n=!0,r=!1;e.properties=[],A();while(!j(an)){n?n=!1:q(cn);var i={key:ut()},s=!1,o;j(pn)?(i.value=Q(!0),o=i.kind="init"):i.key.type!=="Identifier"||i.key.name!=="get"&&i.key.name!=="set"?R():(s=r=!0,o=i.kind=i.key.name,i.key=ut(),yt!==fn&&R(),i.value=at(D(),!1));if(i.key.type==="Identifier"&&(Ct||r))for(var u=0;u<e.properties.length;++u){var a=e.properties[u];if(a.key.name===i.key.name){var f=o==a.kind||s&&a.kind==="init"||o==="init"&&(a.kind==="get"||a.kind==="set");f&&!Ct&&o==="init"&&a.kind==="init"&&(f=!1),f&&t(i.key.start,"Redefinition of property")}}e.properties.push(i)}return H(e,"ObjectExpression")}function ut(){return yt===kt||yt===At?it():lt(!0)}function at(e,n){yt===Ot?e.id=lt():n?R():e.id=null,e.params=[];var r=!0;q(fn);while(!j(ln))r?r=!1:q(cn),e.params.push(lt());var i=Tt,s=Nt;Tt=!0,Nt=[],e.body=V(!0),Tt=i,Nt=s;if(Ct||e.body.body.length&&B(e.body.body[0]))for(var o=e.id?-1:0;o<e.params.length;++o){var u=o<0?e.id:e.params[o];(Bn(u.name)||jn(u.name))&&t(u.start,"Defining '"+u.name+"' in strict mode");if(o>=0)for(var a=0;a<o;++a)u.name===e.params[a].name&&t(u.start,"Argument name clash in strict mode")}return H(e,n?"FunctionDeclaration":"FunctionExpression")}function ft(e,t){var n=[],r=!0;while(!j(e))r?r=!1:q(cn),t&&yt===cn?n.push(null):n.push(Q(!0));return n}function lt(e){var t=D();return t.name=yt===Ot?bt:e&&yt.keyword||R(),A(),H(t,"Identifier")}var ct,ht,pt=function(e){return ct=String(e),ht=ct.length,s(),z()},dt=function(e,t){for(var n=1,r=0;;){Xn.lastIndex=r;var i=Xn.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}},vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt={type:"num"},Lt={type:"regexp"},At={type:"string"},Ot={type:"name"},Mt={type:"eof"},_t={keyword:"break"},Dt={keyword:"case",beforeExpr:!0},Pt={keyword:"catch"},Ht={keyword:"continue"},Bt={keyword:"debugger"},jt={keyword:"default"},Ft={keyword:"do",isLoop:!0},It={keyword:"else",beforeExpr:!0},qt={keyword:"finally"},Rt={keyword:"for",isLoop:!0},Ut={keyword:"function"},zt={keyword:"if"},Wt={keyword:"return",beforeExpr:!0},Xt={keyword:"switch"},Vt={keyword:"throw",beforeExpr:!0},$t={keyword:"try"},Jt={keyword:"var"},Kt={keyword:"while",isLoop:!0},Qt={keyword:"with"},Gt={keyword:"new",beforeExpr:!0},Yt={keyword:"this"},Zt={keyword:"null",atomValue:null},en={keyword:"true",atomValue:!0},tn={keyword:"false",atomValue:!1},nn={keyword:"in",binop:7,beforeExpr:!0},rn={"break":_t,"case":Dt,"catch":Pt,"continue":Ht,"debugger":Bt,"default":jt,"do":Ft,"else":It,"finally":qt,"for":Rt,"function":Ut,"if":zt,"return":Wt,"switch":Xt,"throw":Vt,"try":$t,"var":Jt,"while":Kt,"with":Qt,"null":Zt,"true":en,"false":tn,"new":Gt,"in":nn,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":Yt,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},sn={type:"[",beforeExpr:!0},on={type:"]"},un={type:"{",beforeExpr:!0},an={type:"}"},fn={type:"(",beforeExpr:!0},ln={type:")"},cn={type:",",beforeExpr:!0},hn={type:";",beforeExpr:!0},pn={type:":",beforeExpr:!0},dn={type:"."},vn={type:"?",beforeExpr:!0},mn={type:"#"},gn={binop:10,beforeExpr:!0},yn={isAssign:!0,beforeExpr:!0},bn={isAssign:!0,beforeExpr:!0},wn={binop:9,prefix:!0,beforeExpr:!0},En={postfix:!0,prefix:!0,isUpdate:!0},Sn={prefix:!0,beforeExpr:!0},xn={binop:1,beforeExpr:!0},Tn={binop:2,beforeExpr:!0},Nn={binop:3,beforeExpr:!0},Cn={binop:4,beforeExpr:!0},kn={binop:5,beforeExpr:!0},Ln={binop:6,beforeExpr:!0},An={binop:7,beforeExpr:!0},On={binop:8,beforeExpr:!0},Mn={binop:10,beforeExpr:!0},_n={binop:11,beforeExpr:!0},Dn={bracketL:sn,bracketR:on,braceL:un,braceR:an,parenL:fn,parenR:ln,comma:cn,semi:hn,colon:pn,dot:dn,question:vn,slash:gn,eq:yn,name:Ot,eof:Mt,num:kt,regexp:Lt,string:At,hash:mn};for(var Pn in rn)Dn[Pn]=rn[Pn];var Hn=n("class enum extends super const export import"),Bn=n("implements interface let package private protected public static yield"),jn=n("eval arguments"),Fn=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),In=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,qn="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Rn="ͱ-ʹ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Un=new RegExp("["+qn+"]"),zn=new RegExp("["+qn+Rn+"]"),Wn=/[\n\r\u2028\u2029]/,Xn=/\r\n|[\n\r\u2028\u2029]/g,Vn=[],$n,Jn={kind:"loop"},Kn={kind:"switch"};return pt});