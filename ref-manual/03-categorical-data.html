<!doctype html>
<html lang="en" ng-app="radianDocs">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Radian - Reference manual - Categorical data</title>
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" />
  <link rel="stylesheet" href="../css/syntax.css" type="text/css" />
  <link rel="stylesheet" href="../css/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../css/hljs.css" type="text/css" />
  <link rel="stylesheet" href="../css/radian.css" type="text/css" />
</head>
<body ng-controller="MainCtrl">
  <div class="container">
    <div class="navbar navbar-main">
      <div class="navbar-inner">
        <a class="brand" href="../index.html">Radian</a>
        <ul class="nav">
          <li><a href="../documentation.html">Documentation</a></li>
          <li><a href="../download.html">Download</a></li>
          <li><a href="../community.html">Community</a></li>
          <li><a href="../gallery">Gallery</a></li>
          <li><a href="../license.html">License</a></li>
          <li><a href="../faq.html">FAQ</a></li>
          <li><a href="../roadmap.html">Roadmap</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>

    <h1 id="categorical-data">3. Categorical data</h1>
<p>For point and bar plots, it is possible to use categorical data values for the <code>x</code> and <code>y</code> data coordinates. A number of attributes are provided to support this, as well as a special data structure format to take advantage of hierarchical grouping using multiple categorical data fields.</p>
<hr>
<h2 id="basic-categorical-data-plots">Basic categorical data plots</h2>
<p>For point plots, using a categorical value as the <code>x</code> attribute for a plot results in a discrete set of point clouds being produced, one per category, evenly spaced along the <code>x</code>-axis (see <a href="../Radian/gallery/#/68">this example</a>):</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> height=</span><span class="st">400</span><span class="ot"> aspect=</span><span class="st">1.5</span><span class="ot"> order-x=</span><span class="st">&quot;I. virginica;I. versicolor;I. setosa&quot;</span>
<span class="ot">      axis-x-label=</span><span class="st">&quot;Species&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Petal length&quot;</span>
<span class="ot">      marker=</span><span class="st">&quot;circle&quot;</span><span class="ot"> marker-size=</span><span class="st">10</span><span class="ot"> stroke=</span><span class="st">&quot;none&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;points</span><span class="ot"> x=</span><span class="st">&quot;[[iris.species]]&quot;</span>
<span class="ot">          jitter-x y=</span><span class="st">&quot;[[iris.petal_length]]&quot;</span>
<span class="ot">          fill=</span><span class="st">&quot;[[irispal(iris.species)]]&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/points&gt;</span>
<span class="kw">&lt;/plot&gt;</span>

<span class="kw">&lt;palette</span><span class="ot"> name=</span><span class="st">&quot;irispal&quot;</span><span class="ot"> type=</span><span class="st">&quot;discrete&quot;</span><span class="kw">&gt;</span>
  &quot;I. setosa&quot; red
  &quot;I. versicolor&quot; green
  &quot;I. virginica&quot; blue
<span class="kw">&lt;/palette&gt;</span>

<span class="kw">&lt;plot-data</span><span class="ot"> name=</span><span class="st">&quot;iris&quot;</span><span class="ot"> format=</span><span class="st">&quot;csv&quot;</span>
<span class="ot">           cols=</span><span class="st">&quot;sepal_length,sepal_width,petal_length,petal_width,species&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;species&quot;</span>
<span class="ot">            category-order=</span><span class="st">&quot;I. setosa;I. versicolor;I. virginica&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
5.1,3.5,1.4,0.2,I. setosa
4.9,3.0,1.4,0.2,I. setosa
4.7,3.2,1.3,0.2,I. setosa
4.6,3.1,1.5,0.2,I. setosa
...
<span class="kw">&lt;/plot-data&gt;</span></code></pre>
<p>For bar plots, categorical data fields can be used for the <code>x</code> attribute, as for point plots, but an aggregation scheme is also needed to turn the set of data values corresponding to the category into a single bar height to be plotted. For the <code>&lt;bars&gt;</code> directive, the <code>AGGREGATION</code> attribute (which can take on the values <code>mean</code>, <code>sum</code>, <code>min</code> or <code>max</code>) determines the aggregation scheme used. A simple example plots the mean value for each category:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> axis-x-label=</span><span class="st">&quot;off&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Rate&quot;</span><span class="ot"> stroke=</span><span class="st">&quot;none&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;bars</span><span class="ot"> x=</span><span class="st">&quot;[[d1#sex]]&quot;</span><span class="ot"> y=</span><span class="st">&quot;[[d1#rate]]&quot;</span><span class="ot"> fill=</span><span class="st">&quot;[[mfpal(x)]]&quot;</span>
<span class="ot">        aggregation=</span><span class="st">&quot;mean&quot;</span><span class="ot"> bar-width=</span><span class="st">0.5</span><span class="kw">&gt;&lt;/bars&gt;</span>
<span class="kw">&lt;/plot&gt;</span></code></pre>
<hr>
<h2 id="supporting-attributes">Supporting attributes</h2>
<p>The following attributes are defined to support plots involving categorical data – some of these should appear on the <code>&lt;plot&gt;</code> directive, some on <code>&lt;metadata&gt;</code> and some on <code>&lt;bars&gt;</code> as specified in the following table:</p>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">   </th>
<th align="left">Directive</th>
<th align="left">   </th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>ORDER-X</code></td>
<td align="left"></td>
<td align="left"><code>&lt;plot&gt;</code></td>
<td align="left">Override default ordering for categorical data</td>
</tr>
<tr class="even">
<td align="left"><code>GROUP-X</code></td>
<td align="left"></td>
<td align="left"><code>&lt;plot&gt;</code></td>
<td align="left">Integer grouping level for hierarchical categorical data</td>
</tr>
<tr class="odd">
<td align="left"><code>JITTER-X</code></td>
<td align="left"></td>
<td align="left"><code>&lt;plot&gt;</code></td>
<td align="left">Jitter data points in <code>x</code>-direction (can specify a fraction of the distance between category values or take the default of 0.05)</td>
</tr>
<tr class="even">
<td align="left"><code>JITTER-Y</code></td>
<td align="left"></td>
<td align="left"><code>&lt;plot&gt;</code></td>
<td align="left">As for <code>JITTER-X</code> but in the <code>y</code>-direction</td>
</tr>
<tr class="odd">
<td align="left"><code>CATEGORY-ORDER</code></td>
<td align="left"></td>
<td align="left"><code>&lt;metadata&gt;</code></td>
<td align="left">Define default ordering for categorical data</td>
</tr>
<tr class="even">
<td align="left"><code>AGGREGATION</code></td>
<td align="left"></td>
<td align="left"><code>&lt;bars&gt;</code></td>
<td align="left">Aggregation scheme for generating bars from categorical data (one of <code>mean</code>, <code>sum</code>, <code>min</code>, <code>max</code>)</td>
</tr>
</tbody>
</table>
<p>Ordering of categorical values is controlled by the <code>CATEGORY-ORDER</code> attribute of the <code>&lt;metadata&gt;</code> directive and the <code>ORDER-X</code> attribute of the <code>&lt;plot&gt;</code> directive. In both cases, the ordering is defined by a semicolon-separated list of data values. The <code>&lt;plot&gt;</code> directive’s <code>ORDER-X</code> attribute overrides the default ordering defined by the <code>&lt;metadata&gt;</code> <code>CATEGORY-ORDER</code> attribute.</p>
<p>When displaying categorical data as points, it’s sometimes useful to jitter the position of individual points so as to avoid overlapping points (which give a false sense of the number of points in the plot). The <code>JITTER-X</code> and <code>JITTER-Y</code> attributes on the <code>&lt;plot&gt;</code> directive enable these small random displacements of individual points. These two attributes can either be given without any value, in which case points are jittered by a random value within ±5% of the separation between adjacent categorical values, or a jitter value can be given as a fraction of the inter-category spacing.</p>
<p>The <code>AGGREGATION</code> attribute is explained in the previous section.</p>
<p>Finally, the <code>GROUP-X</code> attribute is used to control the grouping of points and bars when hierarchical categorical data is used. To explain how this works, let’s look at three plots based on the following data:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot-data</span><span class="ot"> name=</span><span class="st">&quot;d1&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;sex&quot;</span><span class="ot"> category-order=</span><span class="st">&quot;male;female&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;env&quot;</span><span class="ot"> category-order=</span><span class="st">&quot;urban;rural&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;age&quot;</span><span class="ot"> category-order=</span><span class="st">&quot;50-54;55-59;60-64;65-69;70-74&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/metadata&gt;</span>
  [ { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;rural&quot;, &quot;age&quot;: &quot;50-54&quot;, &quot;rate&quot;: 15.5 },
    { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;rural&quot;, &quot;age&quot;: &quot;55-59&quot;, &quot;rate&quot;: 20.2 },
    { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;rural&quot;, &quot;age&quot;: &quot;60-64&quot;, &quot;rate&quot;: 32.1 },
    { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;rural&quot;, &quot;age&quot;: &quot;65-69&quot;, &quot;rate&quot;: 48.0 },
    { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;rural&quot;, &quot;age&quot;: &quot;70-74&quot;, &quot;rate&quot;: 65.5 },
    { &quot;sex&quot;: &quot;female&quot;, &quot;env&quot;: &quot;urban&quot;, &quot;age&quot;: &quot;50-54&quot;, &quot;rate&quot;: 15.5 },
    ... ]
<span class="kw">&lt;/plot-data&gt;</span></code></pre>
<p>We could make plots that split the data by a single category (<code>sex</code> or <code>env</code>, for instance), but we can also split on multiple categories at once by zipping the data for the relevant categories together:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> height=</span><span class="st">600</span><span class="ot"> aspect=</span><span class="st">1.5</span><span class="ot"> axis-x-label=</span><span class="st">&quot;off&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Rate&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;bars</span><span class="ot"> x=</span><span class="st">&quot;[[zip(d1#sex,d1#env)]]&quot;</span><span class="ot"> y=</span><span class="st">&quot;[[d1#rate]]&quot;</span>
<span class="ot">        aggregation=</span><span class="st">&quot;mean&quot;</span><span class="ot"> bar-width=</span><span class="st">0.5</span><span class="ot"> stroke-width=</span><span class="st">10</span>
<span class="ot">        stroke=</span><span class="st">&quot;[[urpal(x#1)]]&quot;</span><span class="ot"> fill=</span><span class="st">&quot;[[mfpal(x#0)]]&quot;</span><span class="kw">&gt;&lt;/bars&gt;</span>
<span class="kw">&lt;/plot&gt;</span></code></pre>
<p>In this case, there will be one bar for each distinct value of the pair <code>(sex, env)</code>, and the spacing between the bars will be constant. The bars are stroke and filled based on palettes where we pass the <code>env</code> value to <code>urpal</code> for the stroke and pass the <code>sex</code> value to <code>mfpal</code> for the fill. The bars appear in the order <code>(male,urban)</code>, <code>(male,rural)</code>, <code>(female,urban)</code>, <code>(female,rural)</code>, i.e. the first element in each zipped data item varies slowest.</p>
<p>Grouping behaviour is enabled by setting the <code>GROUP-X</code> attribute to the count of data levels that should be grouped together. Here, <code>GROUP-X</code> is set to one:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> height=</span><span class="st">600</span><span class="ot"> aspect=</span><span class="st">1.5</span><span class="ot"> axis-x-label=</span><span class="st">&quot;off&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Rate&quot;</span>
<span class="ot">      group-x=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;bars</span><span class="ot"> x=</span><span class="st">&quot;[[zip(d1#sex,d1#age)]]&quot;</span><span class="ot"> y=</span><span class="st">&quot;[[d1#rate]]&quot;</span>
<span class="ot">        aggregation=</span><span class="st">&quot;mean&quot;</span><span class="ot"> bar-width=</span><span class="st">0.5</span><span class="ot"> stroke-width=</span><span class="st">2</span>
<span class="ot">        fill=</span><span class="st">&quot;[[mfpal(x#0)]]&quot;</span><span class="kw">&gt;&lt;/bars&gt;</span>
<span class="kw">&lt;/plot&gt;</span></code></pre>
<p>This results in bars that are position in two groups, one for the each value of the <code>sex</code> field. Each group contains one bar for each value of the <code>age</code> field. The grouping can be switched around by changing the order of appearance of the zipped fields in the <code>x</code> data. This plot:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> height=</span><span class="st">600</span><span class="ot"> aspect=</span><span class="st">1.5</span><span class="ot"> axis-x-label=</span><span class="st">&quot;off&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Rate&quot;</span>
<span class="ot">      group-x=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;bars</span><span class="ot"> x=</span><span class="st">&quot;[[zip(d1#age,d1#sex)]]&quot;</span><span class="ot"> y=</span><span class="st">&quot;[[d1#rate]]&quot;</span>
<span class="ot">        aggregation=</span><span class="st">&quot;mean&quot;</span><span class="ot"> bar-width=</span><span class="st">0.5</span><span class="ot"> stroke-width=</span><span class="st">2</span>
<span class="ot">        fill=</span><span class="st">&quot;[[mfpal(x#1)]]&quot;</span><span class="kw">&gt;&lt;/bars&gt;</span>
<span class="kw">&lt;/plot&gt;</span></code></pre>
<p>has one group for each value of the <code>age</code> field, each group having a bar for the different values of the <code>sex</code> field.</p>
<p>This hierarchical composition of categorical data and grouping extends as you would expect for more than two variables (although this kind of plot generally looks better with two or, at most, three, levels of data).</p>
<hr>
<h2 id="the-boxes-directive">The <code>boxes</code> directive</h2>
<p>The <code>boxes</code> directive provides rudimentary box-and-whisker plots. There will be more of this sort of thing in future releases of Radian. For the moment, you can write something like this:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot</span><span class="ot"> height=</span><span class="st">600</span><span class="ot"> aspect=</span><span class="st">1</span><span class="ot"> axis-x-label=</span><span class="st">&quot;Species&quot;</span><span class="ot"> axis-y-label=</span><span class="st">&quot;Petal length&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;boxes</span><span class="ot"> x=</span><span class="st">&quot;[[iris.species]]&quot;</span><span class="ot"> y=</span><span class="st">&quot;[[iris.petal_length]]&quot;</span>
<span class="ot">        stroke=</span><span class="st">&quot;[[irispal(iris.species)]]&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/boxes&gt;</span>
<span class="kw">&lt;/plot&gt;</span></code></pre>
<p>and you will get box-and-whisker plots that show the minimum and maximum values for each category as the whiskers, the 25% and 75% percentiles as the bottom and top edges of the box and the median value as a line across the box. The usual paint styling attributes can be used.</p>

    <footer>
      <div>
         
        <span class="pull-right">Copyright © (2013) OpenBrain
        Ltd.  </span>
      </div>
    </footer>
  </div>
  <script src="../js/jquery.js"></script>
  <script src="../js/jquery.csv.js"></script>
  <script src="../js/escodegen.browser.js"></script>
  <script src="../js/estraverse.js"></script>
  <script src="../js/d3.v2.js"></script>
  <script src="../js/angular.min.js"></script>
  <script src="../js/radian.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/html5slider.js"></script>
  <script src="../js/hljs.js"></script>
  <script src="../js/app.js"></script>
  <script>
  </script>
</body>
</html>
