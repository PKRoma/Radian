<!doctype html>
<html lang="en" ng-app="radianDocs">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Radian - Reference manual - Data sets</title>
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" />
  <link rel="stylesheet" href="../css/syntax.css" type="text/css" />
  <link rel="stylesheet" href="../css/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../css/hljs.css" type="text/css" />
  <link rel="stylesheet" href="../css/radian.css" type="text/css" />
</head>
<body ng-controller="MainCtrl">
  <div class="container">
    <div class="navbar navbar-main">
      <div class="navbar-inner">
        <a class="brand" href="../index.html">Radian</a>
        <ul class="nav">
          <li><a href="../documentation.html">Documentation</a></li>
          <li><a href="../download.html">Download</a></li>
          <li><a href="../community.html">Community</a></li>
          <li><a href="../gallery">Gallery</a></li>
          <li><a href="../license.html">License</a></li>
          <li><a href="../faq.html">FAQ</a></li>
          <li><a href="../roadmap.html">Roadmap</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>

    <h1 id="data-sets">1. Data sets</h1>
<p>Data sets can be included in HTML pages and named using the <code>&lt;plot-data&gt;</code> directive, and AngularJS data binding can be used to access arbitrary values from page UI elements or other sources.</p>
<hr>
<h2 id="the-plot-data-directive">The <code>&lt;plot-data&gt;</code> directive</h2>
<h3 id="attributes">Attributes</h3>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">   </th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>NAME</code></td>
<td align="left"></td>
<td align="left">Data set name (mandatory)</td>
</tr>
<tr class="even">
<td align="left"><code>SUBNAME</code></td>
<td align="left"></td>
<td align="left">Data set sub-name</td>
</tr>
<tr class="odd">
<td align="left"><code>FORMAT</code></td>
<td align="left"></td>
<td align="left">One of <code>csv</code> or <code>json</code> (default)</td>
</tr>
<tr class="even">
<td align="left"><code>COLS</code></td>
<td align="left"></td>
<td align="left">Column names for CSV data</td>
</tr>
<tr class="odd">
<td align="left"><code>SEPARATOR</code></td>
<td align="left"></td>
<td align="left">Separator character for columns in CSV data (defaults to “,”)</td>
</tr>
<tr class="even">
<td align="left"><code>SRC</code></td>
<td align="left"></td>
<td align="left">URL for data source</td>
</tr>
<tr class="odd">
<td align="left"><code>NG-MODEL</code></td>
<td align="left"></td>
<td align="left">Angular data binding attribute</td>
</tr>
</tbody>
</table>
<h3 id="body">Body</h3>
<p>Optionally, <code>metadata</code> directives describing the data values. If no <code>SRC</code> attribute is used to specify the data source, then the data values are included in the body of the directive in the given format.</p>
<h3 id="interpretation">Interpretation</h3>
<p>The <code>&lt;plot-data&gt;</code> directive forms an association between the name given as the <code>NAME</code> attribute of the directive and the given data set. The data set name can then be used to create data paths to access components of the data set in plotting directives (<a href="#data-accessors">see here</a>). The data set name is installed as an Angular variable in the Angular scope of the containing HTML element. If the <code>SUBNAME</code> attribute is supplied as well, then the data is installed as the <code>SUBNAME</code> field of an Angular scope variable whose name is <code>NAME</code> (this is useful for using <code>&lt;plot-data&gt;</code> in conjunction with <code>ng-repeat</code>). The <code>&lt;plot-data&gt;</code> element does not create a scope of its own. For CSV data, if no <code>COLS</code> attribute is given, the column names are taken from the first line of the data.</p>
<p>When data is loaded from a URL using the <code>SRC</code> attribute, the semantics of the <code>&lt;plot-data&gt;</code> directive are identical to the case where the data is included directly in the directive body (except for possible rendering issues if the data download takes a long time: you may see warnings from the <code>radianEval</code> function in the browser console when Radian attempts to plot the empty data set before the data has arrived – these warnings are harmless, and the plots are re-rendered when the data download is complete). Replotting is triggered if the <code>SRC</code> attribute changes, so that an expression can be used to load data from different sources specified by an expression.</p>
<p>Alternatively, the data for plotting can be bound directly to an Angular scope variable by using the <code>NG-MODEL</code> attribute. This works as it does for other Angular directives.</p>
<h3 id="examples">Examples</h3>
<h4 id="temperature-data-by-date-with-error-information">Temperature data by date with error information</h4>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot-data</span><span class="ot"> id=</span><span class="st">&quot;globaltemp&quot;</span><span class="ot"> format=</span><span class="st">&quot;csv&quot;</span><span class="ot"> cols=</span><span class="st">&quot;date,temp,error&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;date&quot;</span><span class="ot"> format=</span><span class="st">&quot;date&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;temp&quot;</span><span class="ot"> label=</span><span class="st">&quot;Global mean temperature&quot;</span><span class="ot"> units=</span><span class="st">&quot;</span><span class="dv">&amp;deg;</span><span class="st">C&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/metadata&gt;</span>
  <span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;error&quot;</span><span class="ot"> error-for=</span><span class="st">&quot;temp&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
&quot;1970-01-15&quot;, 17.352, 0.100
&quot;1970-02-14&quot;, 16.936, 0.090
&quot;1970-03-15&quot;, 17.029, 0.095
&quot;1970-04-15&quot;, 17.550, 0.087
...
<span class="kw">&lt;/plot-data&gt;</span></code></pre>
<h4 id="json-location-data">JSON location data</h4>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;plot-data</span><span class="ot"> id=</span><span class="st">&quot;pumps&quot;</span><span class="kw">&gt;</span>
  [ { &quot;name&quot;: &quot;Broad Street&quot;, &quot;lat&quot;: 51.02345, &quot;lon&quot;: 0.02345 },
    { &quot;name&quot;: &quot;Other&quot;,        &quot;lat&quot;: 51.05445, &quot;lon&quot;: 0.04538 } ]
<span class="kw">&lt;/plot-data&gt;</span></code></pre>
<hr>
<h2 id="the-metadata-directive">The <code>&lt;metadata&gt;</code> directive</h2>
<p>The <code>&lt;metadata&gt;</code> directive that may appear inside <code>&lt;plot-data&gt;</code> directives provides additional information about <code>&lt;plot-data&gt;</code> data fields that may be useful for plotting. Multiple <code>&lt;metadata&gt;</code> items may appear within a <code>&lt;plot-data&gt;</code> directive, up to one per data field.</p>
<h3 id="attributes-1">Attributes</h3>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>NAME</code></td>
<td align="left">Refers to a data field name in the enclosing<code>&lt;plot-data&gt;</code> directive (mandatory)</td>
</tr>
<tr class="even">
<td align="left"><code>FORMAT</code></td>
<td align="left">Absent or <code>date</code> (specifies dates either using flexible parsing or in restricted format given by the <code>DATE-PARSE-FORMAT</code> attribute)</td>
</tr>
<tr class="odd">
<td align="left"><code>DATE-PARSE-FORMAT</code></td>
<td align="left"><code>strftime()</code>-like date parsing format (or <code>isodate</code> to specify dates in strict ISO 8601 format)</td>
</tr>
<tr class="even">
<td align="left"><code>DATE-FORMAT</code></td>
<td align="left">Date output format for plot axes</td>
</tr>
<tr class="odd">
<td align="left"><code>LABEL</code></td>
<td align="left">Axis/legend label for the named data field</td>
</tr>
<tr class="even">
<td align="left"><code>UNITS</code></td>
<td align="left">Units for the named field</td>
</tr>
<tr class="odd">
<td align="left"><code>ERROR-FOR</code></td>
<td align="left">Names another data field for which this field is an uncertainty/error value</td>
</tr>
<tr class="even">
<td align="left"><code>CATEGORY-ORDER</code></td>
<td align="left">Semicolon-separated list of categorical values, specifying an ordering to be used for plotting.</td>
</tr>
</tbody>
</table>
<h3 id="body-1">Body</h3>
<p>None</p>
<h3 id="interpretation-1">Interpretation</h3>
<p>A <code>&lt;metadata&gt;</code> directive specifies metadata for a single field of an associated containing <code>&lt;plot-data&gt;</code> directive. This metadata either gives label and units information for axis and legend labels, marks data fields as having special formats (currently only dates, but this could be used for other things as well) and allows fields to be marked up as providing uncertainty values for other fields (this information can be used to plot error bars or uncertainty ranges).</p>
<p>The data field that the metadata corresponds to is specified using the <code>NAME</code> attribute, which is a period-separated list of field names giving a path to the field of interest.</p>
<h3 id="examples-1">Examples</h3>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;date&quot;</span><span class="ot"> format=</span><span class="st">&quot;date&quot;</span><span class="ot"> date-parse-format=</span><span class="st">&quot;isodate&quot;</span>
<span class="ot">          date-format=</span><span class="st">&quot;%e %b %Y&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
<span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;date.doy&quot;</span><span class="ot"> label=</span><span class="st">&quot;Day of year&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
<span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;temp&quot;</span><span class="ot"> label=</span><span class="st">&quot;Mean temperature&quot;</span><span class="ot"> units=</span><span class="st">&quot;</span><span class="dv">&amp;deg;</span><span class="st">C&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span>
<span class="kw">&lt;metadata</span><span class="ot"> name=</span><span class="st">&quot;error&quot;</span><span class="ot"> error-for=</span><span class="st">&quot;temp&quot;</span><span class="kw">&gt;&lt;/metadata&gt;</span></code></pre>

    <footer>
      <div>
         
        <span class="pull-right">Copyright © (2013) OpenBrain
        Ltd.  </span>
      </div>
    </footer>
  </div>
  <script src="../js/jquery.js"></script>
  <script src="../js/jquery.csv.js"></script>
  <script src="../js/escodegen.browser.js"></script>
  <script src="../js/estraverse.js"></script>
  <script src="../js/d3.v2.js"></script>
  <script src="../js/angular.min.js"></script>
  <script src="../js/radian.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/html5slider.js"></script>
  <script src="../js/hljs.js"></script>
  <script src="../js/app.js"></script>
  <script>
  </script>
</body>
</html>
